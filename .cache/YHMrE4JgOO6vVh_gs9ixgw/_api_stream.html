<!DOCTYPE html><html lang="zh-CN"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>stream | Node.js API &#x6587;&#x6863;</title>
  <link rel="icon" sizes="32x32" type="image/png" href="//static.nodejs.cn/_static/img/favicon.png">
  <script>
    document.write('<link href="api.css?1541521323618" rel="stylesheet">')
  </script>
  
</head>
<body class="alt apidoc" id="page_api">
  <div id="api-section-stream">
    <div id="content" class="clearfix">
      <div id="column2" class="interior">
        <div id="intro" class="interior">
          <a href="/">
            Node.js &#x4E2D;&#x6587;&#x7F51;
          </a>
          <!-- <div>
            <input placeholder="API 快速搜索" id="modal_search_trigger">
          </div> -->
        </div>
        <div class="line"></div>
        <ul>
<li><a href="_api_assert.html" class="nav-assert">assert - &#x65AD;&#x8A00;</a></li>
<li><a href="_api_async_hooks.html" class="nav-async_hooks">async_hooks - &#x5F02;&#x6B65;&#x94A9;&#x5B50;</a></li>
<li><a href="_api_buffer.html" class="nav-buffer">Buffer - &#x7F13;&#x51B2;&#x5668;</a></li>
<li><a href="_api_child_process.html" class="nav-child_process">child_process - &#x5B50;&#x8FDB;&#x7A0B;</a></li>
<li><a href="_api_cluster.html" class="nav-cluster">cluster - &#x96C6;&#x7FA4;</a></li>
<li><a href="_api_console.html" class="nav-console">console - &#x63A7;&#x5236;&#x53F0;</a></li>
<li><a href="_api_crypto.html" class="nav-crypto">crypto - &#x52A0;&#x5BC6;</a></li>
<li><a href="_api_dgram.html" class="nav-dgram">dgram - &#x6570;&#x636E;&#x62A5;</a></li>
<li><a href="_api_dns.html" class="nav-dns">dns - &#x57DF;&#x540D;&#x670D;&#x52A1;&#x5668;</a></li>
<li><a href="_api_domain.html" class="nav-domain">domain - &#x57DF;</a></li>
<li><a href="_api_errors.html" class="nav-errors">Error - &#x5F02;&#x5E38;</a></li>
<li><a href="_api_events.html" class="nav-events">events - &#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x5668;</a></li>
<li><a href="_api_fs.html" class="nav-fs">fs - &#x6587;&#x4EF6;&#x7CFB;&#x7EDF;</a></li>
<li><a href="_api_globals.html" class="nav-globals">global - &#x5168;&#x5C40;&#x53D8;&#x91CF;</a></li>
<li><a href="_api_http.html" class="nav-http">http - HTTP</a></li>
<li><a href="_api_http2.html" class="nav-http2">http2 - HTTP/2</a></li>
<li><a href="_api_https.html" class="nav-https">https - HTTPS</a></li>
<li><a href="_api_inspector.html" class="nav-inspector">inspector - &#x8C03;&#x8BD5;&#x5668;</a></li>
<li><a href="_api_modules.html" class="nav-modules">module - &#x6A21;&#x5757;</a></li>
<li><a href="_api_net.html" class="nav-net">net - &#x7F51;&#x7EDC;</a></li>
<li><a href="_api_os.html" class="nav-os">os - &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;</a></li>
<li><a href="_api_path.html" class="nav-path">path - &#x8DEF;&#x5F84;</a></li>
<li><a href="_api_perf_hooks.html" class="nav-perf_hooks">perf_hooks - &#x6027;&#x80FD;&#x94A9;&#x5B50;</a></li>
<li><a href="_api_process.html" class="nav-process">process - &#x8FDB;&#x7A0B;</a></li>
<li><a href="_api_punycode.html" class="nav-punycode">punycode - &#x57DF;&#x540D;&#x4EE3;&#x7801;</a></li>
<li><a href="_api_querystring.html" class="nav-querystring">querystring - &#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;</a></li>
<li><a href="_api_readline.html" class="nav-readline">readline - &#x9010;&#x884C;&#x8BFB;&#x53D6;</a></li>
<li><a href="_api_repl.html" class="nav-repl">repl - &#x4EA4;&#x4E92;&#x5F0F;&#x89E3;&#x91CA;&#x5668;</a></li>
<li><a href="_api_stream.html" class="nav-stream active">stream - &#x6D41;</a></li>
<li><a href="_api_string_decoder.html" class="nav-string_decoder">string_decoder - &#x5B57;&#x7B26;&#x4E32;&#x89E3;&#x7801;&#x5668;</a></li>
<li><a href="_api_timers.html" class="nav-timers">timer - &#x5B9A;&#x65F6;&#x5668;</a></li>
<li><a href="_api_tls.html" class="nav-tls">tls - &#x5B89;&#x5168;&#x4F20;&#x8F93;&#x5C42;</a></li>
<li><a href="_api_tracing.html" class="nav-tracing">trace_events - &#x8DDF;&#x8E2A;&#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_tty.html" class="nav-tty">tty - &#x7EC8;&#x7AEF;</a></li>
<li><a href="_api_url.html" class="nav-url">url - &#x7F51;&#x5740;</a></li>
<li><a href="_api_util.html" class="nav-util">util - &#x5B9E;&#x7528;&#x5DE5;&#x5177;</a></li>
<li><a href="_api_v8.html" class="nav-v8">v8 - V8&#x5F15;&#x64CE;</a></li>
<li><a href="_api_vm.html" class="nav-vm">vm - &#x865A;&#x62DF;&#x673A;</a></li>
<li><a href="_api_worker_threads.html" class="nav-worker_threads">worker_threads - &#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;</a></li>
<li><a href="_api_zlib.html" class="nav-zlib">zlib - &#x538B;&#x7F29;</a></li>
</ul>
<div class="line"></div>
<ul>
<li><a href="_api_documentation.html" class="nav-documentation">&#x5173;&#x4E8E;&#x672C;&#x6587;&#x6863;</a></li>
<li><a href="_api_synopsis.html" class="nav-synopsis">&#x7528;&#x6CD5;&#x4E0E;&#x4F8B;&#x5B50;</a></li>
<li><a href="_api_addons.html" class="nav-addons">C++&#x63D2;&#x4EF6;</a></li>
<li><a href="_api_n-api.html" class="nav-n-api">N-API</a></li>
<li><a href="_api_cli.html" class="nav-cli">&#x547D;&#x4EE4;&#x884C;&#x9009;&#x9879;</a></li>
<li><a href="_api_debugger.html" class="nav-debugger">debugger &#x8C03;&#x8BD5;&#x5668;</a></li>
<li><a href="_api_esm.html" class="nav-esm">ECMAScript &#x6A21;&#x5757;</a></li>
<li><a href="_api_intl.html" class="nav-intl">&#x56FD;&#x9645;&#x5316;&#x652F;&#x6301;</a></li>
<li><a href="_api_deprecations.html" class="nav-deprecations">&#x5E9F;&#x5F03;&#x7684; API</a></li>
</ul>
      </div>
  
      <div id="column1" data-id="stream" class="interior">
        <header>
          <h1>Node.js v10.13.0 &#x6587;&#x6863;</h1>
          <div id="gtoc">
            <ul>
              <li>
                <a href="_api_.html" name="toc">&#x8FD4;&#x56DE;&#x6587;&#x6863;&#x9996;&#x9875;</a>
              </li>
              <li>
                <a href="/search" name="toc">&#x641C;&#x7D22;</a>
              </li>
            </ul>
          </div>
          <hr>
        </header>

        <div id="adWrap"></div>
  
        <div id="toc">
          <h2>&#x76EE;&#x5F55;</h2>
          <ul>
<li>
<p><span class="stability_2"><a href="_api_stream.html#stream_stream">stream - &#x6D41;</a></span></p>
<ul>
<li><a href="_api_stream.html#stream_organization_of_this_document">&#x672C;&#x6587;&#x6863;&#x7684;&#x7EC4;&#x7EC7;&#x7ED3;&#x6784;</a></li>
<li>
<p><a href="_api_stream.html#stream_types_of_streams">&#x6D41;&#x7684;&#x7C7B;&#x578B;</a></p>
<ul>
<li><a href="_api_stream.html#stream_object_mode">&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;</a></li>
<li><a href="_api_stream.html#stream_buffering">&#x7F13;&#x51B2;</a></li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_api_for_stream_consumers">&#x7528;&#x4E8E;&#x6D88;&#x8D39;&#x6D41;&#x7684; API</a></p>
<ul>
<li>
<p><a href="_api_stream.html#stream_writable_streams">&#x53EF;&#x5199;&#x6D41;</a></p>
<ul>
<li>
<p><a href="_api_stream.html#stream_class_stream_writable">stream.Writable &#x7C7B;</a></p>
<ul>
<li><a href="_api_stream.html#stream_event_close">&apos;close&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_drain">&apos;drain&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_error">&apos;error&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_finish">&apos;finish&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_pipe">&apos;pipe&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_unpipe">&apos;unpipe&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_writable_cork">writable.cork()</a></li>
<li><a href="_api_stream.html#stream_writable_destroy_error">writable.destroy([error])</a></li>
<li><a href="_api_stream.html#stream_writable_end_chunk_encoding_callback">writable.end([chunk][, encoding][, callback])</a></li>
<li><a href="_api_stream.html#stream_writable_setdefaultencoding_encoding">writable.setDefaultEncoding(encoding)</a></li>
<li><a href="_api_stream.html#stream_writable_uncork">writable.uncork()</a></li>
<li><a href="_api_stream.html#stream_writable_writablehighwatermark">writable.writableHighWaterMark</a></li>
<li><a href="_api_stream.html#stream_writable_writablelength">writable.writableLength</a></li>
<li><a href="_api_stream.html#stream_writable_write_chunk_encoding_callback">writable.write(chunk[, encoding][, callback])</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_readable_streams">&#x53EF;&#x8BFB;&#x6D41;</a></p>
<ul>
<li><a href="_api_stream.html#stream_two_reading_modes">&#x4E24;&#x79CD;&#x8BFB;&#x53D6;&#x6A21;&#x5F0F;</a></li>
<li><a href="_api_stream.html#stream_three_states">&#x4E09;&#x79CD;&#x72B6;&#x6001;</a></li>
<li><a href="_api_stream.html#stream_choose_one_api_style">&#x9009;&#x62E9;&#x4E00;&#x79CD;&#x63A5;&#x53E3;&#x98CE;&#x683C;</a></li>
<li>
<p><a href="_api_stream.html#stream_class_stream_readable">stream.Readable &#x7C7B;</a></p>
<ul>
<li><a href="_api_stream.html#stream_event_close_1">&apos;close&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_data">&apos;data&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_end">&apos;end&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_error_1">&apos;error&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_event_readable">&apos;readable&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_readable_destroy_error">readable.destroy([error])</a></li>
<li><a href="_api_stream.html#stream_readable_ispaused">readable.isPaused()</a></li>
<li><a href="_api_stream.html#stream_readable_pause">readable.pause()</a></li>
<li><a href="_api_stream.html#stream_readable_pipe_destination_options">readable.pipe(destination[, options])</a></li>
<li><a href="_api_stream.html#stream_readable_read_size">readable.read([size])</a></li>
<li><a href="_api_stream.html#stream_readable_readablehighwatermark">readable.readableHighWaterMark</a></li>
<li><a href="_api_stream.html#stream_readable_readablelength">readable.readableLength</a></li>
<li><a href="_api_stream.html#stream_readable_resume">readable.resume()</a></li>
<li><a href="_api_stream.html#stream_readable_setencoding_encoding">readable.setEncoding(encoding)</a></li>
<li><a href="_api_stream.html#stream_readable_unpipe_destination">readable.unpipe([destination])</a></li>
<li><a href="_api_stream.html#stream_readable_unshift_chunk">readable.unshift(chunk)</a></li>
<li><a href="_api_stream.html#stream_readable_wrap_stream">readable.wrap(stream)</a></li>
<li><span class="stability_1"><a href="_api_stream.html#stream_readable_symbol_asynciterator">readable[Symbol.asyncIterator]()</a></span></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_duplex_and_transform_streams">&#x53CC;&#x5DE5;&#x6D41;&#x4E0E;&#x8F6C;&#x6362;&#x6D41;</a></p>
<ul>
<li><a href="_api_stream.html#stream_class_stream_duplex">stream.Duplex &#x7C7B;</a></li>
<li>
<p><a href="_api_stream.html#stream_class_stream_transform">stream.Transform &#x7C7B;</a></p>
<ul>
<li><a href="_api_stream.html#stream_transform_destroy_error">transform.destroy([error])</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="_api_stream.html#stream_stream_finished_stream_callback">stream.finished(stream, callback)</a></li>
<li><a href="_api_stream.html#stream_stream_pipeline_streams_callback">stream.pipeline(...streams[, callback])</a></li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_api_for_stream_implementers">&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x6D41;&#x7684; API</a></p>
<ul>
<li><a href="_api_stream.html#stream_simplified_construction">&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;</a></li>
<li>
<p><a href="_api_stream.html#stream_implementing_a_writable_stream">&#x5B9E;&#x73B0;&#x53EF;&#x5199;&#x6D41;</a></p>
<ul>
<li><a href="_api_stream.html#stream_constructor_new_stream_writable_options">new stream.Writable([options])</a></li>
<li><a href="_api_stream.html#stream_writable_write_chunk_encoding_callback_1">writable._write(chunk, encoding, callback)</a></li>
<li><a href="_api_stream.html#stream_writable_writev_chunks_callback">writable._writev(chunks, callback)</a></li>
<li><a href="_api_stream.html#stream_writable_destroy_err_callback">writable._destroy(err, callback)</a></li>
<li><a href="_api_stream.html#stream_writable_final_callback">writable._final(callback)</a></li>
<li><a href="_api_stream.html#stream_errors_while_writing">&#x5199;&#x5165;&#x65F6;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;</a></li>
<li><a href="_api_stream.html#stream_an_example_writable_stream">&#x53EF;&#x5199;&#x6D41;&#x7684;&#x4F8B;&#x5B50;</a></li>
<li><a href="_api_stream.html#stream_decoding_buffers_in_a_writable_stream">&#x5728;&#x53EF;&#x5199;&#x6D41;&#x4E2D;&#x89E3;&#x7801; buffer</a></li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_implementing_a_readable_stream">&#x5B9E;&#x73B0;&#x53EF;&#x8BFB;&#x6D41;</a></p>
<ul>
<li><a href="_api_stream.html#stream_new_stream_readable_options">new stream.Readable([options])</a></li>
<li><a href="_api_stream.html#stream_readable_read_size_1">readable._read(size)</a></li>
<li><a href="_api_stream.html#stream_readable_destroy_err_callback">readable._destroy(err, callback)</a></li>
<li><a href="_api_stream.html#stream_readable_push_chunk_encoding">readable.push(chunk[, encoding])</a></li>
<li><a href="_api_stream.html#stream_errors_while_reading">&#x8BFB;&#x53D6;&#x65F6;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;</a></li>
<li><a href="_api_stream.html#stream_an_example_counting_stream">&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x4F8B;&#x5B50;</a></li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_implementing_a_duplex_stream">&#x5B9E;&#x73B0;&#x53CC;&#x5DE5;&#x6D41;</a></p>
<ul>
<li><a href="_api_stream.html#stream_new_stream_duplex_options">new stream.Duplex(options)</a></li>
<li><a href="_api_stream.html#stream_an_example_duplex_stream">&#x53CC;&#x5DE5;&#x6D41;&#x7684;&#x4F8B;&#x5B50;</a></li>
<li><a href="_api_stream.html#stream_object_mode_duplex_streams">&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x53CC;&#x5DE5;&#x6D41;</a></li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_implementing_a_transform_stream">&#x5B9E;&#x73B0;&#x8F6C;&#x6362;&#x6D41;</a></p>
<ul>
<li><a href="_api_stream.html#stream_new_stream_transform_options">new stream.Transform([options])</a></li>
<li><a href="_api_stream.html#stream_events_finish_and_end">&apos;finish&apos; &#x4E0E; &apos;end&apos; &#x4E8B;&#x4EF6;</a></li>
<li><a href="_api_stream.html#stream_transform_flush_callback">transform._flush(callback)</a></li>
<li><a href="_api_stream.html#stream_transform_transform_chunk_encoding_callback">transform._transform(chunk, encoding, callback)</a></li>
<li><a href="_api_stream.html#stream_class_stream_passthrough">stream.PassThrough &#x7C7B;</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="_api_stream.html#stream_additional_notes">&#x5176;&#x4ED6;&#x6CE8;&#x610F;&#x4E8B;&#x9879;</a></p>
<ul>
<li><a href="_api_stream.html#stream_compatibility_with_older_node_js_versions">&#x517C;&#x5BB9;&#x65E7;&#x7248;&#x672C;&#x7684; Node.js</a></li>
<li><a href="_api_stream.html#stream_readable_read_0">readable.read(0)</a></li>
<li><a href="_api_stream.html#stream_readable_push">readable.push(&apos;&apos;)</a></li>
<li><a href="_api_stream.html#stream_highwatermark_discrepancy_after_calling_readable_setencoding">&#x8C03;&#x7528; `readable.setEncoding()` &#x4E4B;&#x540E; `highWaterMark` &#x7684;&#x5DEE;&#x5F02;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
        </div>
  
        <div id="apicontent">
          <h1>stream - &#x6D41;<span><a class="mark" href="_api_stream.html#stream_stream" id="stream_stream">#</a></span></h1><p class="tip_wrap"><a href="_api_en_stream.html#stream_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<!--introduced_in=v0.10.0-->
<p></p><div class="api_stability api_stability_2"><a href="_api_documentation.html#documentation_stability_index">&#x7A33;&#x5B9A;&#x6027;: 2</a> - &#x7A33;&#x5B9A;&#x7684;</div><p></p>
<p>&#x6D41;&#xFF08;stream&#xFF09;&#x662F; Node.js &#x4E2D;&#x5904;&#x7406;&#x6D41;&#x5F0F;&#x6570;&#x636E;&#x7684;&#x62BD;&#x8C61;&#x63A5;&#x53E3;&#x3002;
<code>stream</code> &#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B; API&#xFF0C;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5B9E;&#x73B0;&#x4E86;&#x6D41;&#x63A5;&#x53E3;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>Node.js &#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x79CD;&#x6D41;&#x5BF9;&#x8C61;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;<a href="/s/2RqpEw">HTTP &#x670D;&#x52A1;&#x5668;&#x7684;&#x8BF7;&#x6C42;</a>&#x548C; <a href="/s/tQWUzG"><code>process.stdout</code></a> &#x90FD;&#x662F;&#x6D41;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
<p>&#x6D41;&#x53EF;&#x4EE5;&#x662F;&#x53EF;&#x8BFB;&#x7684;&#x3001;&#x53EF;&#x5199;&#x7684;&#x3001;&#x6216;&#x8005;&#x53EF;&#x8BFB;&#x53EF;&#x5199;&#x7684;&#x3002;
&#x6240;&#x6709;&#x7684;&#x6D41;&#x90FD;&#x662F; <a href="/s/pGAddE"><code>EventEmitter</code></a> &#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
<p><code>stream</code> &#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#xFF1A;</p>
<pre><code class="language-js">const stream = require(&apos;stream&apos;);
</code></pre>
<p>&#x5C3D;&#x7BA1;&#x7406;&#x89E3;&#x6D41;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4F46;&#x662F; <code>stream</code> &#x6A21;&#x5757;&#x672C;&#x8EAB;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#x521B;&#x5EFA;&#x65B0;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x5B9E;&#x4F8B;&#x3002;
&#x5BF9;&#x4E8E;&#x4EE5;&#x6D88;&#x8D39;&#x6D41;&#x5BF9;&#x8C61;&#x4E3A;&#x4E3B;&#x7684;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x6781;&#x5C11;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>stream</code> &#x6A21;&#x5757;&#x3002;</p>
<h2>&#x672C;&#x6587;&#x6863;&#x7684;&#x7EC4;&#x7EC7;&#x7ED3;&#x6784;<span><a class="mark" href="_api_stream.html#stream_organization_of_this_document" id="stream_organization_of_this_document">#</a></span></h2><p class="tip_wrap"><a href="_api_en_stream.html#stream_organization_of_this_document" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/organization_of_this_document.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x672C;&#x6587;&#x6863;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7AE0;&#x8282;&#xFF0C;&#x5916;&#x52A0;&#x5176;&#x4ED6;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E09;&#x7AE0;&#x8282;&#x3002;
&#x7B2C;&#x4E00;&#x7AE0;&#x8282;&#x9610;&#x8FF0;&#x4E86;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;&#x6D41;&#x65F6;&#x9700;&#x8981;&#x7684; API&#x3002;
&#x7B2C;&#x4E8C;&#x7AE0;&#x8282;&#x9610;&#x8FF0;&#x4E86;&#x5B9E;&#x73B0;&#x65B0;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x65F6;&#x9700;&#x8981;&#x7684; API&#x3002;</p>
<h2>&#x6D41;&#x7684;&#x7C7B;&#x578B;<span><a class="mark" href="_api_stream.html#stream_types_of_streams" id="stream_types_of_streams">#</a></span></h2><p class="tip_wrap"><a href="_api_en_stream.html#stream_types_of_streams" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/types_of_streams.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>Node.js &#x4E2D;&#x6709;&#x56DB;&#x79CD;&#x57FA;&#x672C;&#x7684;&#x6D41;&#x7C7B;&#x578B;&#xFF1A;</p>
<ul>
<li><a href="/s/9JUnJ8"><code>Writable</code></a> - &#x53EF;&#x5199;&#x5165;&#x6570;&#x636E;&#x7684;&#x6D41;&#xFF08;&#x4F8B;&#x5982; <a href="/s/VdSJQa"><code>fs.createWriteStream()</code></a>&#xFF09;&#x3002;</li>
<li><a href="/s/YuDKX1"><code>Readable</code></a> - &#x53EF;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x7684;&#x6D41;&#xFF08;&#x4F8B;&#x5982; <a href="/s/wiVPXD"><code>fs.createReadStream()</code></a>&#xFF09;&#x3002;</li>
<li><a href="/s/2iRabr"><code>Duplex</code></a> - &#x53EF;&#x8BFB;&#x53C8;&#x53EF;&#x5199;&#x7684;&#x6D41;&#xFF08;&#x4F8B;&#x5982; <a href="/s/wsJ1o1"><code>net.Socket</code></a>&#xFF09;&#x3002;</li>
<li><a href="/s/fhVJQM"><code>Transform</code></a> - &#x5728;&#x8BFB;&#x5199;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6216;&#x8F6C;&#x6362;&#x6570;&#x636E;&#x7684; <code>Duplex</code> &#x6D41;&#xFF08;&#x4F8B;&#x5982; <a href="/s/n6ED45"><code>zlib.createDeflate()</code></a>&#xFF09;&#x3002;</li>
</ul>
<h3>&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;<span><a class="mark" href="_api_stream.html#stream_object_mode" id="stream_object_mode">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_object_mode" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/object_mode.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>Node.js &#x521B;&#x5EFA;&#x7684;&#x6D41;&#x90FD;&#x662F;&#x8FD0;&#x4F5C;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x548C;&#xA0;<code>Buffer</code>&#xFF08;&#x6216; <code>Uint8Array</code>&#xFF09;&#x4E0A;&#x3002;
&#x5F53;&#x7136;&#xFF0C;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x5B83;&#x7C7B;&#x578B;&#x7684; JavaScript &#x503C;&#xFF08;&#x9664;&#x4E86; <code>null</code>&#xFF09;&#x3002;
&#x8FD9;&#x4E9B;&#x6D41;&#x4F1A;&#x4EE5;&#x201C;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x201D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5F53;&#x521B;&#x5EFA;&#x6D41;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>objectMode</code> &#x9009;&#x9879;&#x628A;&#x6D41;&#x5B9E;&#x4F8B;&#x5207;&#x6362;&#x5230;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x3002;
&#x5C06;&#x5DF2;&#x5B58;&#x5728;&#x7684;&#x6D41;&#x5207;&#x6362;&#x5230;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x662F;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x3002;</p>
<h3>&#x7F13;&#x51B2;<span><a class="mark" href="_api_stream.html#stream_buffering" id="stream_buffering">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_buffering" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/buffering.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<!--type=misc-->
<p><a href="/s/9JUnJ8">&#x53EF;&#x5199;&#x6D41;</a>&#x548C;<a href="/s/YuDKX1">&#x53EF;&#x8BFB;&#x6D41;</a>&#x90FD;&#x4F1A;&#x5728;&#x5185;&#x90E8;&#x7684;&#x7F13;&#x51B2;&#x5668;&#x4E2D;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x7684; <code>writable.writableBuffer</code> &#x6216; <code>readable.readableBuffer</code> &#x6765;&#x83B7;&#x53D6;&#x3002;</p>
<p>&#x53EF;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x5927;&#x5C0F;&#x53D6;&#x51B3;&#x4E8E;&#x4F20;&#x5165;&#x6D41;&#x6784;&#x9020;&#x51FD;&#x6570;&#x7684; <code>highWaterMark</code> &#x9009;&#x9879;&#x3002;
&#x5BF9;&#x4E8E;&#x666E;&#x901A;&#x7684;&#x6D41;&#xFF0C;<code>highWaterMark</code> &#x6307;&#x5B9A;&#x4E86;<a href="/s/K499k3">&#x5B57;&#x8282;&#x7684;&#x603B;&#x6570;</a>&#x3002;
&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C;<code>highWaterMark</code> &#x6307;&#x5B9A;&#x4E86;&#x5BF9;&#x8C61;&#x7684;&#x603B;&#x6570;&#x3002;</p>
<p>&#x5F53;&#x8C03;&#x7528; <a href="/s/8s3paZ"><code>stream.push(chunk)</code></a> &#x65F6;&#xFF0C;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x7F13;&#x51B2;&#x5728;&#x53EF;&#x8BFB;&#x6D41;&#x4E2D;&#x3002;
&#x5982;&#x679C;&#x6D41;&#x7684;&#x6D88;&#x8D39;&#x8005;&#x6CA1;&#x6709;&#x8C03;&#x7528; <a href="/s/SpgRaa"><code>stream.read()</code></a>&#xFF0C;&#x5219;&#x6570;&#x636E;&#x4F1A;&#x4FDD;&#x7559;&#x5728;&#x5185;&#x90E8;&#x961F;&#x5217;&#x4E2D;&#x76F4;&#x5230;&#x88AB;&#x6D88;&#x8D39;&#x3002;</p>
<p>&#x4E00;&#x65E6;&#x5185;&#x90E8;&#x7684;&#x53EF;&#x8BFB;&#x7F13;&#x51B2;&#x7684;&#x603B;&#x5927;&#x5C0F;&#x8FBE;&#x5230; <code>highWaterMark</code> &#x6307;&#x5B9A;&#x7684;&#x9608;&#x503C;&#x65F6;&#xFF0C;&#x6D41;&#x4F1A;&#x6682;&#x65F6;&#x505C;&#x6B62;&#x4ECE;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x76F4;&#x5230;&#x5F53;&#x524D;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x88AB;&#x6D88;&#x8D39;
&#xFF08;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x6D41;&#x4F1A;&#x505C;&#x6B62;&#x8C03;&#x7528;&#x5185;&#x90E8;&#x7684;&#x7528;&#x4E8E;&#x586B;&#x5145;&#x53EF;&#x8BFB;&#x7F13;&#x51B2;&#x7684; <code>readable._read()</code>&#xFF09;&#x3002;</p>
<p>&#x5F53;&#x8C03;&#x7528; <a href="/s/doppiK"><code>writable.write(chunk)</code></a> &#x65F6;&#xFF0C;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x7F13;&#x51B2;&#x5728;&#x53EF;&#x5199;&#x6D41;&#x4E2D;&#x3002;
&#x5F53;&#x5185;&#x90E8;&#x7684;&#x53EF;&#x5199;&#x7F13;&#x51B2;&#x7684;&#x603B;&#x5927;&#x5C0F;&#x5C0F;&#x4E8E; <code>highWaterMark</code> &#x8BBE;&#x7F6E;&#x7684;&#x9608;&#x503C;&#x65F6;&#xFF0C;&#x8C03;&#x7528; <code>writable.write()</code> &#x4F1A;&#x8FD4;&#x56DE; <code>true</code>&#x3002;
&#x4E00;&#x65E6;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x7684;&#x5927;&#x5C0F;&#x8FBE;&#x5230;&#x6216;&#x8D85;&#x8FC7; <code>highWaterMark</code> &#x65F6;&#xFF0C;&#x5219;&#x4F1A;&#x8FD4;&#x56DE; <code>false</code>&#x3002;</p>
<p><code>stream</code> API &#x7684;&#x4E3B;&#x8981;&#x76EE;&#x6807;&#xFF0C;&#x7279;&#x522B;&#x662F; <a href="/s/Ea2ZNW"><code>stream.pipe()</code></a>&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x9650;&#x5236;&#x6570;&#x636E;&#x7684;&#x7F13;&#x51B2;&#x5230;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x7A0B;&#x5EA6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BFB;&#x5199;&#x901F;&#x5EA6;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x6E90;&#x5934;&#x4E0E;&#x76EE;&#x7684;&#x5730;&#x4E0D;&#x4F1A;&#x538B;&#x57AE;&#x5185;&#x5B58;&#x3002;</p>
<p>&#x56E0;&#x4E3A; <a href="/s/2iRabr"><code>Duplex</code></a> &#x548C; <a href="/s/fhVJQM"><code>Transform</code></a> &#x90FD;&#x662F;&#x53EF;&#x8BFB;&#x53C8;&#x53EF;&#x5199;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7EF4;&#x62A4;&#x7740;&#x4E24;&#x4E2A;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;&#x7684;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x5668;&#x7528;&#x4E8E;&#x8BFB;&#x53D6;&#x548C;&#x5199;&#x5165;&#xFF0C;
&#x8FD9;&#x4F7F;&#x5F97;&#x5B83;&#x4EEC;&#x5728;&#x7EF4;&#x62A4;&#x6570;&#x636E;&#x6D41;&#x65F6;&#xFF0C;&#x8BFB;&#x53D6;&#x548C;&#x5199;&#x5165;&#x4E24;&#x8FB9;&#x53EF;&#x4EE5;&#x5404;&#x81EA;&#x72EC;&#x7ACB;&#x5730;&#x8FD0;&#x4F5C;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;<a href="/s/wsJ1o1"><code>net.Socket</code></a> &#x5B9E;&#x4F8B;&#x662F; <a href="/s/2iRabr"><code>Duplex</code></a> &#x6D41;&#xFF0C;&#x5B83;&#x7684;&#x53EF;&#x8BFB;&#x7AEF;&#x53EF;&#x4EE5;&#x6D88;&#x8D39;&#x4ECE; socket &#x63A5;&#x6536;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x53EF;&#x5199;&#x7AEF;&#x5219;&#x53EF;&#x4EE5;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; socket&#x3002;
&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; socket &#x7684;&#x901F;&#x5EA6;&#x53EF;&#x80FD;&#x6BD4;&#x63A5;&#x6536;&#x6570;&#x636E;&#x7684;&#x901F;&#x5EA6;&#x5FEB;&#x6216;&#x8005;&#x6162;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8BFB;&#x5199;&#x4E24;&#x7AEF;&#x72EC;&#x7ACB;&#x5730;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF08;&#x6216;&#x7F13;&#x51B2;&#xFF09;&#x5C31;&#x663E;&#x5F97;&#x5F88;&#x91CD;&#x8981;&#x4E86;&#x3002;</p>
<h2>&#x7528;&#x4E8E;&#x6D88;&#x8D39;&#x6D41;&#x7684; API<span><a class="mark" href="_api_stream.html#stream_api_for_stream_consumers" id="stream_api_for_stream_consumers">#</a></span></h2><p class="tip_wrap"><a href="_api_en_stream.html#stream_api_for_stream_consumers" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/api_for_stream_consumers.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<!--type=misc-->
<p>&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684; Node.js &#x5E94;&#x7528;&#x90FD;&#x5728;&#x67D0;&#x79CD;&#x7A0B;&#x5EA6;&#x4E0A;&#x4F7F;&#x7528;&#x4E86;&#x6D41;&#x3002;
&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4F7F;&#x7528;&#x6D41;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A; HTTP &#x670D;&#x52A1;&#x5668;&#xFF1A;</p>
<pre><code class="language-js">const http = require(&apos;http&apos;);

const server = http.createServer((req, res) =&gt; {
 &#xA0;// req &#x662F;&#x4E00;&#x4E2A; http.IncomingMessage &#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x662F;&#x53EF;&#x8BFB;&#x6D41;&#x3002;
 &#xA0;// res &#x662F;&#x4E00;&#x4E2A; http.ServerResponse &#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x662F;&#x53EF;&#x5199;&#x6D41;&#x3002;

  let body = &apos;&apos;;
 &#xA0;// &#x63A5;&#x6536;&#x6570;&#x636E;&#x4E3A; utf8 &#x5B57;&#x7B26;&#x4E32;&#xFF0C;
 &#xA0;// &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF0C;&#x5219;&#x4F1A;&#x63A5;&#x6536;&#x5230; Buffer &#x5BF9;&#x8C61;&#x3002;
 &#xA0;req.setEncoding(&apos;utf8&apos;);

 &#xA0;// &#x5982;&#x679C;&#x6DFB;&#x52A0;&#x4E86;&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x5219;&#x53EF;&#x8BFB;&#x6D41;&#x4F1A;&#x89E6;&#x53D1; &apos;data&apos; &#x4E8B;&#x4EF6;&#x3002;
  req.on(&apos;data&apos;, (chunk) =&gt; {
    body += chunk;
  });

 &#xA0;// &apos;end&apos; &#x4E8B;&#x4EF6;&#x8868;&#x660E;&#x6574;&#x4E2A;&#x8BF7;&#x6C42;&#x4F53;&#x5DF2;&#x88AB;&#x63A5;&#x6536;&#x3002; 
  req.on(&apos;end&apos;, () =&gt; {
    try {
      const data = JSON.parse(body);
 &#xA0; &#xA0; &#xA0;// &#x54CD;&#x5E94;&#x4FE1;&#x606F;&#x7ED9;&#x7528;&#x6237;&#x3002;
 &#xA0; &#xA0; &#xA0;res.write(typeof data);
      res.end();
    } catch (er) {
 &#xA0; &#xA0; &#xA0;// json &#x89E3;&#x6790;&#x5931;&#x8D25;&#x3002;
      res.statusCode = 400;
      return res.end(`&#x9519;&#x8BEF;: ${er.message}`);
    }
  });
});

server.listen(1337);

// $ curl localhost:1337 -d &quot;{}&quot;
// object
// $ curl localhost:1337 -d &quot;\&quot;foo\&quot;&quot;
// string
// $ curl localhost:1337 -d &quot;not json&quot;
// &#x9519;&#x8BEF;: Unexpected token o in JSON at position 1
</code></pre>
<p><a href="/s/9JUnJ8">&#x53EF;&#x5199;&#x6D41;</a>&#xFF08;&#x6BD4;&#x5982;&#x4F8B;&#x5B50;&#x4E2D;&#x7684; <code>res</code>&#xFF09;&#x4F1A;&#x66B4;&#x9732;&#x4E86;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982; <code>write()</code> &#x548C;&#xA0;<code>end()</code> &#x7528;&#x4E8E;&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;&#x6D41;&#x3002;</p>
<p>&#x5F53;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4ECE;&#x6D41;&#x8BFB;&#x53D6;&#x65F6;&#xFF0C;<a href="/s/YuDKX1">&#x53EF;&#x8BFB;&#x6D41;</a>&#x4F1A;&#x4F7F;&#x7528;&#xA0;<a href="/s/pGAddE"><code>EventEmitter</code></a> API &#x6765;&#x901A;&#x77E5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;
&#x4ECE;&#x6D41;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x3002;</p>
<p><a href="/s/9JUnJ8">&#x53EF;&#x5199;&#x6D41;</a>&#x548C;<a href="/s/YuDKX1">&#x53EF;&#x8BFB;&#x6D41;</a>&#x90FD;&#x901A;&#x8FC7;&#x591A;&#x79CD;&#x65B9;&#x5F0F;&#x4F7F;&#x7528; <a href="/s/pGAddE"><code>EventEmitter</code></a> API &#x6765;&#x901A;&#x8BAF;&#x6D41;&#x7684;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x3002;</p>
<p><a href="/s/2iRabr"><code>Duplex</code></a> &#x6D41;&#x548C; <a href="/s/fhVJQM"><code>Transform</code></a> &#x6D41;&#x90FD;&#x662F;&#x53EF;&#x5199;&#x53C8;&#x53EF;&#x8BFB;&#x7684;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x53EA;&#x9700;&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;&#x6D41;&#x6216;&#x4ECE;&#x6D41;&#x6D88;&#x8D39;&#x6570;&#x636E;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x5B9E;&#x73B0;&#x6D41;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x901A;&#x5E38;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x8C03;&#x7528; <code>require(&apos;stream&apos;)</code>&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x65B0;&#x7C7B;&#x578B;&#x7684;&#x6D41;&#x7684;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="/s/d2EgSi">&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x6D41;&#x7684;API</a>&#x7AE0;&#x8282;&#x3002;</p>
<h3>&#x53EF;&#x5199;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_writable_streams" id="stream_writable_streams">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_streams" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_streams.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x53EF;&#x5199;&#x6D41;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8981;&#x88AB;&#x5199;&#x5165;&#x7684;&#x76EE;&#x7684;&#x5730;&#x7684;&#x4E00;&#x79CD;&#x62BD;&#x8C61;&#x3002;</p>
<p>&#x53EF;&#x5199;&#x6D41;&#x7684;&#x4F8B;&#x5B50;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><a href="/s/2F5RHd">&#x5BA2;&#x6237;&#x7AEF;&#x7684; HTTP &#x8BF7;&#x6C42;</a></li>
<li><a href="/s/rMXoZ1">&#x670D;&#x52A1;&#x5668;&#x7684; HTTP &#x54CD;&#x5E94;</a></li>
<li><a href="/s/2uZDVA">fs &#x7684;&#x5199;&#x5165;&#x6D41;</a></li>
<li><a href="/s/duYbh2">zlib &#x6D41;</a></li>
<li><a href="/s/FuEfsg">crypto &#x6D41;</a></li>
<li><a href="/s/wsJ1o1">TCP socket</a></li>
<li><a href="/s/Su8gEr">&#x5B50;&#x8FDB;&#x7A0B; stdin</a></li>
<li><a href="/s/tQWUzG"><code>process.stdout</code></a>&#x3001;<a href="/s/wPv5zY"><code>process.stderr</code></a></li>
</ul>
<p>&#x4E0A;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;&#x4E8B;&#x5B9E;&#x4E0A;&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#x53EF;&#x5199;&#x6D41;&#x63A5;&#x53E3;&#x7684; <a href="/s/2iRabr"><code>Duplex</code></a> &#x6D41;&#x3002;</p>
<p>&#x6240;&#x6709;&#x53EF;&#x5199;&#x6D41;&#x90FD;&#x5B9E;&#x73B0;&#x4E86; <a href="/s/9JUnJ8"><code>stream.Writable</code></a> &#x7C7B;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x5C3D;&#x7BA1;&#x53EF;&#x5199;&#x6D41;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x4F8B;&#x53EF;&#x80FD;&#x7565;&#x6709;&#x5DEE;&#x522B;&#xFF0C;&#x4F46;&#x6240;&#x6709;&#x7684;&#x53EF;&#x5199;&#x6D41;&#x90FD;&#x9075;&#x5FAA;&#x540C;&#x4E00;&#x57FA;&#x672C;&#x7684;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x6240;&#x793A;&#xFF1A;</p>
<pre><code class="language-js">const myStream = getWritableStreamSomehow();
myStream.write(&apos;&#x4E00;&#x4E9B;&#x6570;&#x636E;&apos;);
myStream.write(&apos;&#x66F4;&#x591A;&#x6570;&#x636E;&apos;);
myStream.end(&apos;&#x5B8C;&#x6210;&#x5199;&#x5165;&#x6570;&#x636E;&apos;);
</code></pre>
<h4>stream.Writable &#x7C7B;<span><a class="mark" href="_api_stream.html#stream_class_stream_writable" id="stream_class_stream_writable">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_class_stream_writable" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/class_stream_writable.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<!--type=class-->
<h5>&apos;close&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_close" id="stream_event_close">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_close" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_close.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<p>&#x5F53;&#x6D41;&#x6216;&#x5176;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#xFF08;&#x6BD4;&#x5982;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF09;&#x88AB;&#x5173;&#x95ED;&#x65F6;&#x89E6;&#x53D1;&#x3002;
&#x8868;&#x660E;&#x4E0D;&#x4F1A;&#x518D;&#x89E6;&#x53D1;&#x5176;&#x4ED6;&#x4E8B;&#x4EF6;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x518D;&#x53D1;&#x751F;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x4E0D;&#x662F;&#x6240;&#x6709;&#x53EF;&#x5199;&#x6D41;&#x90FD;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;close&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<h5>&apos;drain&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_drain" id="stream_event_drain">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_drain" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_drain.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<p>&#x5982;&#x679C;&#x8C03;&#x7528; <a href="/s/doppiK"><code>stream.write(chunk)</code></a> &#x8FD4;&#x56DE; <code>false</code>&#xFF0C;&#x5219;&#x5F53;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;&#x6D41;&#x65F6;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;drain&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="language-js">// &#x5411;&#x53EF;&#x5199;&#x6D41;&#x4E2D;&#x5199;&#x5165;&#x6570;&#x636E;&#x4E00;&#x767E;&#x4E07;&#x6B21;&#x3002;
// &#x7559;&#x610F;&#x80CC;&#x538B;&#xFF08;back-pressure&#xFF09;&#x3002;
function writeOneMillionTimes(writer, data, encoding, callback) {
  let i = 1000000;
  write();
  function write() {
    let ok = true;
    do {
      i--;
      if (i === 0) {
 &#xA0; &#xA0; &#xA0; &#xA0;// &#x6700;&#x540E;&#x4E00;&#x6B21;&#x5199;&#x5165;&#x3002;
 &#xA0; &#xA0; &#xA0; &#xA0;writer.write(data, encoding, callback);
      } else {
 &#xA0; &#xA0; &#xA0; &#xA0;// &#x68C0;&#x67E5;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5199;&#x5165;&#x3002; 
 &#xA0; &#xA0; &#xA0; &#xA0;// &#x4E0D;&#x8981;&#x4F20;&#x5165;&#x56DE;&#x8C03;&#xFF0C;&#x56E0;&#x4E3A;&#x5199;&#x5165;&#x8FD8;&#x6CA1;&#x6709;&#x7ED3;&#x675F;&#x3002;
 &#xA0; &#xA0; &#xA0; &#xA0;ok = writer.write(data, encoding);
      }
    } while (i &gt; 0 &amp;&amp; ok);
    if (i &gt; 0) {
 &#xA0; &#xA0; &#xA0;// &#x88AB;&#x63D0;&#x524D;&#x4E2D;&#x6B62;&#x3002;
 &#xA0; &#xA0; &#xA0;// &#x5F53;&#x89E6;&#x53D1; &apos;drain&apos; &#x4E8B;&#x4EF6;&#x65F6;&#x7EE7;&#x7EED;&#x5199;&#x5165;&#x3002;
      writer.once(&apos;drain&apos;, write);
    }
  }
}
</code></pre>
<h5>&apos;error&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_error" id="stream_event_error">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_error" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_error.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a></li>
</ul>
<p>&#x5F53;&#x5199;&#x5165;&#x6570;&#x636E;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x65F6;&#x89E6;&#x53D1;&#x3002;</p>
<p>&#x5F53;&#x89E6;&#x53D1; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x65F6;&#xFF0C;&#x6D41;&#x8FD8;&#x672A;&#x88AB;&#x5173;&#x95ED;&#x3002;</p>
<h5>&apos;finish&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_finish" id="stream_event_finish">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_finish" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_finish.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<p>&#x8C03;&#x7528; <a href="/s/nvArK4"><code>stream.end()</code></a> &#x4E14;&#x7F13;&#x51B2;&#x6570;&#x636E;&#x90FD;&#x5DF2;&#x4F20;&#x7ED9;&#x5E95;&#x5C42;&#x7CFB;&#x7EDF;&#x4E4B;&#x540E;&#x89E6;&#x53D1;&#x3002;</p>
<pre><code class="language-js">const writer = getWritableStreamSomehow();
for (let i = 0; i &lt; 100; i++) {
  writer.write(`&#x5199;&#x5165; #${i}!\n`);
}
writer.end(&apos;&#x5199;&#x5165;&#x7ED3;&#x5C3E;\n&apos;);
writer.on(&apos;finish&apos;, () =&gt; {
  console.error(&apos;&#x5199;&#x5165;&#x5DF2;&#x5B8C;&#x6210;&apos;);
});
</code></pre>
<h5>&apos;pipe&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_pipe" id="stream_event_pipe">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_pipe" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_pipe.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>src</code> <a href="_api_stream.html#stream_class_stream_readable" class="type">&lt;stream.Readable&gt;</a> &#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x6D41;&#x5165;&#x5230;&#x53EF;&#x5199;&#x6D41;&#x7684;&#x6765;&#x6E90;&#x6D41;&#x3002;</li>
</ul>
<p>&#x5F53;&#x5728;&#x53EF;&#x8BFB;&#x6D41;&#x4E0A;&#x8C03;&#x7528; <a href="/s/Ea2ZNW"><code>stream.pipe()</code></a> &#x65F6;&#x89E6;&#x53D1;&#x3002;</p>
<pre><code class="language-js">const writer = getWritableStreamSomehow();
const reader = getReadableStreamSomehow();
writer.on(&apos;pipe&apos;, (src) =&gt; {
  console.error(&apos;&#x6709;&#x6570;&#x636E;&#x6B63;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x6D41;&#x5165;&#x5199;&#x5165;&#x5668;&apos;);
  assert.equal(src, reader);
});
reader.pipe(writer);
</code></pre>
<h5>&apos;unpipe&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_unpipe" id="stream_event_unpipe">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_unpipe" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_unpipe.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>src</code> <a href="_api_stream.html#stream_class_stream_readable" class="type">&lt;stream.Readable&gt;</a> <a href="/s/35GqHX">&#x88AB;&#x79FB;&#x9664;&#x53EF;&#x5199;&#x6D41;&#x7BA1;&#x9053;</a>&#x7684;&#x6765;&#x6E90;&#x6D41;&#x3002;</li>
</ul>
<p>&#x5F53;&#x5728;&#x53EF;&#x8BFB;&#x6D41;&#x4E0A;&#x8C03;&#x7528; <a href="/s/35GqHX"><code>stream.unpipe()</code></a> &#x65F6;&#x89E6;&#x53D1;&#x3002;</p>
<p>&#x5F53;&#x53EF;&#x8BFB;&#x6D41;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x6D41;&#x5411;&#x53EF;&#x5199;&#x6D41;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;unpipe&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="language-js">const writer = getWritableStreamSomehow();
const reader = getReadableStreamSomehow();
writer.on(&apos;unpipe&apos;, (src) =&gt; {
  console.error(&apos;&#x5DF2;&#x79FB;&#x9664;&#x53EF;&#x5199;&#x6D41;&#x7BA1;&#x9053;&apos;);
  assert.equal(src, reader);
});
reader.pipe(writer);
reader.unpipe(writer);
</code></pre>
<h5>writable.cork()<span><a class="mark" href="_api_stream.html#stream_writable_cork" id="stream_writable_cork">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_cork" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_cork.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.2</span>
</div>
<p>&#x5F3A;&#x5236;&#x628A;&#x6240;&#x6709;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x90FD;&#x7F13;&#x51B2;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x3002;
&#x5F53;&#x8C03;&#x7528; <a href="/s/2Bzt8L"><code>stream.uncork()</code></a> &#x6216; <a href="/s/nvArK4"><code>stream.end()</code></a> &#x65F6;&#xFF0C;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x624D;&#x4F1A;&#x88AB;&#x8F93;&#x51FA;&#x3002;</p>
<p>&#x5F53;&#x5199;&#x5165;&#x5927;&#x91CF;&#x5C0F;&#x5757;&#x6570;&#x636E;&#x5230;&#x6D41;&#x65F6;&#xFF0C;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x53EF;&#x80FD;&#x5931;&#x6548;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x6027;&#x80FD;&#x4E0B;&#x964D;&#xFF0C;<code>writable.cork()</code> &#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;
&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86; <code>writable._writev()</code> &#x7684;&#x6D41;&#x53EF;&#x4EE5;&#x7528;&#x66F4;&#x4F18;&#x7684;&#x65B9;&#x5F0F;&#x5BF9;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7F13;&#x51B2;&#x3002;</p>
<h5>writable.destroy([error])<span><a class="mark" href="_api_stream.html#stream_writable_destroy_error" id="stream_writable_destroy_error">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_destroy_error" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_destroy_error.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>error</code> <a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a></li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x9500;&#x6BC1;&#x6D41;&#xFF0C;&#x5E76;&#x89E6;&#x53D1; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x4E14;&#x4F20;&#x5165; <code>error</code> &#x53C2;&#x6570;&#x3002;
&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x53EF;&#x5199;&#x6D41;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x8C03;&#x7528; <code>write()</code> &#x6216; <code>end()</code> &#x90FD;&#x4F1A;&#x5BFC;&#x81F4; <code>ERR_STREAM_DESTROYED</code> &#x9519;&#x8BEF;&#x3002;
&#x5B9E;&#x73B0;&#x6D41;&#x65F6;&#x4E0D;&#x5E94;&#x8BE5;&#x91CD;&#x5199;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x91CD;&#x5199; <a href="/s/7DTgUP"><code>writable._destroy()</code></a>&#x3002;</p>
<h5>writable.end([chunk][, encoding][, callback])<span><a class="mark" href="_api_stream.html#stream_writable_end_chunk_encoding_callback" id="stream_writable_end_chunk_encoding_callback">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_end_chunk_encoding_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_end_chunk_encoding_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v10.0.0</td>
<td><p>This method now returns a reference to <code>writable</code>.</p></td></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>chunk</code> argument can now be a <code>Uint8Array</code> instance.</p></td></tr>
<tr><td>v0.9.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>chunk</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x8981;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x3002;
		&#x5BF9;&#x4E8E;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;<code>chunk</code> &#x5FC5;&#x987B;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3001;<code>Buffer</code>&#x3001;&#x6216; <code>Uint8Array</code>&#x3002;
&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C; <code>chunk</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55; JavaScript &#x503C;&#xFF0C;&#x9664;&#x4E86; <code>null</code>&#x3002;</li>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5982;&#x679C; <code>chunk</code> &#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5219;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53;&#x6D41;&#x7ED3;&#x675F;&#x65F6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x8C03;&#x7528; <code>writable.end()</code> &#x8868;&#x660E;&#x5DF2;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x8981;&#x88AB;&#x5199;&#x5165;<a href="/s/9JUnJ8">&#x53EF;&#x5199;&#x6D41;</a>&#x3002;
&#x53EF;&#x9009;&#x7684; <code>chunk</code> &#x548C; <code>encoding</code> &#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x5728;&#x5173;&#x95ED;&#x6D41;&#x4E4B;&#x524D;&#x518D;&#x5199;&#x5165;&#x4E00;&#x5757;&#x6570;&#x636E;&#x3002;
&#x5982;&#x679C;&#x4F20;&#x5165;&#x4E86; <code>callback</code> &#x51FD;&#x6570;&#xFF0C;&#x5219;&#x4F1A;&#x505A;&#x4E3A;&#x76D1;&#x542C;&#x5668;&#x6DFB;&#x52A0;&#x5230; <a href="/s/VBJRc8"><code>&apos;finish&apos;</code></a> &#x4E8B;&#x4EF6;&#x3002;</p>
<p>&#x8C03;&#x7528; <a href="/s/nvArK4"><code>stream.end()</code></a> &#x4E4B;&#x540E;&#x518D;&#x8C03;&#x7528; <a href="/s/doppiK"><code>stream.write()</code></a> &#x4F1A;&#x5BFC;&#x81F4;&#x9519;&#x8BEF;&#x3002;</p>
<pre><code class="language-js">// &#x5148;&#x5199;&#x5165; &apos;hello, &apos;&#xFF0C;&#x7ED3;&#x675F;&#x524D;&#x518D;&#x5199;&#x5165; &apos;world!&apos;&#x3002;
const fs = require(&apos;fs&apos;);
const file = fs.createWriteStream(&apos;&#x4F8B;&#x5B50;.txt&apos;);
file.write(&apos;hello, &apos;);
file.end(&apos;world!&apos;);
// &#x540E;&#x9762;&#x4E0D;&#x5141;&#x8BB8;&#x518D;&#x5199;&#x5165;&#x6570;&#x636E;&#xFF01;
</code></pre>
<h5>writable.setDefaultEncoding(encoding)<span><a class="mark" href="_api_stream.html#stream_writable_setdefaultencoding_encoding" id="stream_writable_setdefaultencoding_encoding">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_setdefaultencoding_encoding" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_setdefaultencoding_encoding.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v6.1.0</td>
<td><p>This method now returns a reference to <code>writable</code>.</p></td></tr>
<tr><td>v0.11.15</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.11.15</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x9ED8;&#x8BA4;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x4E3A;<a href="/s/9JUnJ8">&#x53EF;&#x5199;&#x6D41;</a>&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x7684; <code>encoding</code>&#x3002;</p>
<h5>writable.uncork()<span><a class="mark" href="_api_stream.html#stream_writable_uncork" id="stream_writable_uncork">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_uncork" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_uncork.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.2</span>
</div>
<p>&#x5C06;&#x8C03;&#x7528; <a href="/s/HbaGHW"><code>stream.cork()</code></a> &#x540E;&#x7F13;&#x51B2;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x8F93;&#x51FA;&#x5230;&#x76EE;&#x6807;&#x3002;</p>
<p>&#x5F53;&#x4F7F;&#x7528; <a href="/s/HbaGHW"><code>writable.cork()</code></a> &#x548C; <code>writable.uncork()</code> &#x6765;&#x7BA1;&#x7406;&#x6D41;&#x7684;&#x5199;&#x5165;&#x7F13;&#x51B2;&#x65F6;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; <code>process.nextTick()</code> &#x6765;&#x5EF6;&#x8FDF;&#x8C03;&#x7528; <code>writable.uncork()</code>&#x3002;
&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5355;&#x4E2A; Node.js &#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x4E2D;&#x8C03;&#x7528;&#x7684;&#x6240;&#x6709; <code>writable.write()</code> &#x8FDB;&#x884C;&#x6279;&#x5904;&#x7406;&#x3002;</p>
<pre><code class="language-js">stream.cork();
stream.write(&apos;&#x4E00;&#x4E9B; &apos;);
stream.write(&apos;&#x6570;&#x636E; &apos;);
process.nextTick(() =&gt; stream.uncork());
</code></pre>
<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6D41;&#x4E0A;&#x591A;&#x6B21;&#x8C03;&#x7528; <a href="/s/HbaGHW"><code>writable.cork()</code></a>&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x8C03;&#x7528;&#x540C;&#x6837;&#x6B21;&#x6570;&#x7684; <code>writable.uncork()</code> &#x624D;&#x80FD;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="language-js">stream.cork();
stream.write(&apos;&#x4E00;&#x4E9B; &apos;);
stream.cork();
stream.write(&apos;&#x6570;&#x636E; &apos;);
process.nextTick(() =&gt; {
  stream.uncork();
  // &#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x88AB;&#x8F93;&#x51FA;&#xFF0C;&#x76F4;&#x5230;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x7528; uncork()&#x3002;
  stream.uncork();
});
</code></pre>
<h5>writable.writableHighWaterMark<span><a class="mark" href="_api_stream.html#stream_writable_writablehighwatermark" id="stream_writable_writablehighwatermark">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_writablehighwatermark" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_writablehighwatermark.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v9.3.0</span>
</div>
<ul>
<li><a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x6784;&#x9020;&#x53EF;&#x5199;&#x6D41;&#x65F6;&#x4F20;&#x5165;&#x7684; <code>highWaterMark</code> &#x7684;&#x503C;&#x3002;</p>
<h5>writable.writableLength<span><a class="mark" href="_api_stream.html#stream_writable_writablelength" id="stream_writable_writablelength">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_writablelength" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_writablelength.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v9.4.0</span>
</div>
<p>&#x8FD4;&#x56DE;&#x961F;&#x5217;&#x4E2D;&#x51C6;&#x5907;&#x88AB;&#x5199;&#x5165;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF08;&#x6216;&#x5BF9;&#x8C61;&#x6570;&#xFF09;&#x3002;</p>
<h5>writable.write(chunk[, encoding][, callback])<span><a class="mark" href="_api_stream.html#stream_writable_write_chunk_encoding_callback" id="stream_writable_write_chunk_encoding_callback">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_write_chunk_encoding_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_write_chunk_encoding_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>chunk</code> argument can now be a <code>Uint8Array</code> instance.</p></td></tr>
<tr><td>v6.0.0</td>
<td><p>Passing <code>null</code> as the <code>chunk</code> parameter will always be considered invalid now, even in object mode.</p></td></tr>
<tr><td>v0.9.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>chunk</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x8981;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x3002;
&#xA0;&#x5BF9;&#x4E8E;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;<code>chunk</code> &#x5FC5;&#x987B;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3001;<code>Buffer</code> &#x6216; <code>Uint8Array</code>&#x3002;
&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C;<code>chunk</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55; JavaScript &#x503C;&#xFF0C;&#x9664;&#x4E86; <code>null</code>&#x3002;</li>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5982;&#x679C; <code>chunk</code> &#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5219;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53;&#x6570;&#x636E;&#x5757;&#x88AB;&#x8F93;&#x51FA;&#x5230;&#x76EE;&#x6807;&#x540E;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x5982;&#x679C;&#x6D41;&#x9700;&#x8981;&#x7B49;&#x5F85; <code>&apos;drain&apos;</code> &#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x5199;&#x5165;&#x66F4;&#x591A;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; <code>false</code>&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE; <code>true</code>&#x3002;</li>
</ul>
<p><code>writable.write()</code> &#x5199;&#x5165;&#x6570;&#x636E;&#x5230;&#x6D41;&#xFF0C;&#x5E76;&#x5728;&#x6570;&#x636E;&#x88AB;&#x5B8C;&#x5168;&#x5904;&#x7406;&#x4E4B;&#x540E;&#x8C03;&#x7528; <code>callback</code>&#x3002;
&#x5982;&#x679C;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x5219; <code>callback</code> &#x53EF;&#x80FD;&#x88AB;&#x8C03;&#x7528;&#x4E5F;&#x53EF;&#x80FD;&#x4E0D;&#x88AB;&#x8C03;&#x7528;&#x3002;
&#x4E3A;&#x4E86;&#x53EF;&#x9760;&#x5730;&#x68C0;&#x6D4B;&#x9519;&#x8BEF;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x6DFB;&#x52A0;&#x76D1;&#x542C;&#x5668;&#x3002;</p>
<p>&#x5728;&#x63A5;&#x6536;&#x4E86; <code>chunk</code> &#x540E;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x90E8;&#x7684;&#x7F13;&#x51B2;&#x5C0F;&#x4E8E;&#x521B;&#x5EFA;&#x6D41;&#x65F6;&#x914D;&#x7F6E;&#x7684; <code>highWaterMark</code>&#xFF0C;&#x5219;&#x8FD4;&#x56DE; <code>true</code> &#x3002;
&#x5982;&#x679C;&#x8FD4;&#x56DE; <code>false</code> &#xFF0C;&#x5219;&#x5E94;&#x8BE5;&#x505C;&#x6B62;&#x5411;&#x6D41;&#x5199;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x76F4;&#x5230; <a href="/s/gFdjtJ"><code>&apos;drain&apos;</code></a> &#x4E8B;&#x4EF6;&#x88AB;&#x89E6;&#x53D1;&#x3002;</p>
<p>&#x5F53;&#x6D41;&#x8FD8;&#x672A;&#x88AB;&#x6392;&#x7A7A;&#x65F6;&#xFF0C;&#x8C03;&#x7528; <code>write()</code> &#x4F1A;&#x7F13;&#x51B2; <code>chunk</code>&#xFF0C;&#x5E76;&#x8FD4;&#x56DE; <code>false</code>&#x3002;
&#x4E00;&#x65E6;&#x6240;&#x6709;&#x5F53;&#x524D;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x5757;&#x90FD;&#x88AB;&#x6392;&#x7A7A;&#x4E86;&#xFF08;&#x88AB;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x63A5;&#x6536;&#x5E76;&#x4F20;&#x8F93;&#xFF09;&#xFF0C;&#x5219;&#x89E6;&#x53D1; <code>&apos;drain&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x5EFA;&#x8BAE;&#x4E00;&#x65E6; <code>write()</code> &#x8FD4;&#x56DE; false&#xFF0C;&#x5219;&#x4E0D;&#x518D;&#x5199;&#x5165;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x76F4;&#x5230; <code>&apos;drain&apos;</code> &#x4E8B;&#x4EF6;&#x88AB;&#x89E6;&#x53D1;&#x3002;
&#x5F53;&#x6D41;&#x8FD8;&#x672A;&#x88AB;&#x6392;&#x7A7A;&#x65F6;&#xFF0C;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x8C03;&#x7528; <code>write()</code>&#xFF0C;Node.js &#x4F1A;&#x7F13;&#x51B2;&#x6240;&#x6709;&#x88AB;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x76F4;&#x5230;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x5185;&#x5B58;&#x5360;&#x7528;&#xFF0C;&#x8FD9;&#x65F6;&#x5B83;&#x4F1A;&#x65E0;&#x6761;&#x4EF6;&#x4E2D;&#x6B62;&#x3002;
&#x751A;&#x81F3;&#x5728;&#x5B83;&#x4E2D;&#x6B62;&#x4E4B;&#x524D;&#xFF0C; &#x9AD8;&#x5185;&#x5B58;&#x5360;&#x7528;&#x5C06;&#x4F1A;&#x5BFC;&#x81F4;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x7684;&#x6027;&#x80FD;&#x53D8;&#x5DEE;&#x548C; RSS &#x53D8;&#x9AD8;&#xFF08;&#x5373;&#x4F7F;&#x5185;&#x5B58;&#x4E0D;&#x518D;&#x9700;&#x8981;&#xFF0C;&#x901A;&#x5E38;&#x4E5F;&#x4E0D;&#x4F1A;&#x88AB;&#x91CA;&#x653E;&#x56DE;&#x7CFB;&#x7EDF;&#xFF09;&#x3002;
&#x5982;&#x679C;&#x8FDC;&#x7A0B;&#x7684;&#x53E6;&#x4E00;&#x7AEF;&#x6CA1;&#x6709;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#xFF0C;TCP &#x7684; socket &#x53EF;&#x80FD;&#x6C38;&#x8FDC;&#x4E5F;&#x4E0D;&#x4F1A;&#x6392;&#x7A7A;&#xFF0C;&#x6240;&#x4EE5;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x4E0D;&#x4F1A;&#x6392;&#x7A7A;&#x7684; socket &#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x8FDC;&#x7A0B;&#x53EF;&#x5229;&#x7528;&#x7684;&#x6F0F;&#x6D1E;&#x3002; </p>
<p>&#x5BF9;&#x4E8E; <a href="/s/fhVJQM"><code>Transform</code></a>, &#x5199;&#x5165;&#x6570;&#x636E;&#x5230;&#x4E00;&#x4E2A;&#x4E0D;&#x4F1A;&#x6392;&#x7A7A;&#x7684;&#x6D41;&#x5C24;&#x5176;&#x6210;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A; <code>Transform</code> &#x6D41;&#x9ED8;&#x8BA4;&#x4F1A;&#x88AB;&#x6682;&#x505C;&#xFF0C;&#x76F4;&#x5230;&#x5B83;&#x4EEC;&#x88AB; pipe &#x6216;&#x8005;&#x6DFB;&#x52A0;&#x4E86; <code>&apos;data&apos;</code> &#x6216; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x3002; </p>
<p>&#x5982;&#x679C;&#x8981;&#x88AB;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x751F;&#x6210;&#x6216;&#x8005;&#x53D6;&#x5F97;&#xFF0C;&#x5EFA;&#x8BAE;&#x5C06;&#x903B;&#x8F91;&#x5C01;&#x88C5;&#x4E3A;&#x4E00;&#x4E2A;<a href="/s/YuDKX1">&#x53EF;&#x8BFB;&#x6D41;</a>&#x5E76;&#x4E14;&#x4F7F;&#x7528; <a href="/s/Ea2ZNW"><code>stream.pipe()</code></a>&#x3002;
&#x5982;&#x679C;&#x8981;&#x4F18;&#x5148;&#x8C03;&#x7528; <code>write()</code>&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="/s/gFdjtJ"><code>&apos;drain&apos;</code></a> &#x4E8B;&#x4EF6;&#x6765;&#x9632;&#x6B62;&#x80CC;&#x538B;&#x4E0E;&#x907F;&#x514D;&#x5185;&#x5B58;&#x95EE;&#x9898;:</p>
<pre><code class="language-js">function write(data, cb) {
  if (!stream.write(data)) {
    stream.once(&apos;drain&apos;, cb);
  } else {
    process.nextTick(cb);
  }
}

// &#x5728;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x88AB;&#x6267;&#x884C;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x5176;&#x4ED6;&#x7684;&#x5199;&#x5165;&#x3002;
write(&apos;hello&apos;, () =&gt; {
  console.log(&apos;&#x5B8C;&#x6210;&#x5199;&#x5165;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x66F4;&#x591A;&#x7684;&#x5199;&#x5165;&apos;);
});
</code></pre>
<h3>&#x53EF;&#x8BFB;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_readable_streams" id="stream_readable_streams">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_streams" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_streams.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x53EF;&#x8BFB;&#x6D41;&#x662F;&#x5BF9;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x7684;&#x6765;&#x6E90;&#x7684;&#x4E00;&#x79CD;&#x62BD;&#x8C61;&#x3002;</p>
<p>&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x4F8B;&#x5B50;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><a href="/s/2RqpEw">&#x5BA2;&#x6237;&#x7AEF;&#x7684; HTTP &#x54CD;&#x5E94;</a></li>
<li><a href="/s/2RqpEw">&#x670D;&#x52A1;&#x5668;&#x7684; HTTP &#x8BF7;&#x6C42;</a></li>
<li><a href="/s/C3Eioq">fs &#x7684;&#x8BFB;&#x53D6;&#x6D41;</a></li>
<li><a href="/s/duYbh2">zlib &#x6D41;</a></li>
<li><a href="/s/FuEfsg">crypto &#x6D41;</a></li>
<li><a href="/s/wsJ1o1">TCP socket</a></li>
<li><a href="/s/F2vs59">&#x5B50;&#x8FDB;&#x7A0B; stdout &#x4E0E; stderr</a></li>
<li><a href="/s/gagmJq"><code>process.stdin</code></a></li>
</ul>
<p>&#x6240;&#x6709;&#x53EF;&#x8BFB;&#x6D41;&#x90FD;&#x5B9E;&#x73B0;&#x4E86; <a href="/s/YuDKX1"><code>stream.Readable</code></a> &#x7C7B;&#x5B9A;&#x4E49;&#x7684;&#x63A5;&#x53E3;&#x3002;</p>
<h4>&#x4E24;&#x79CD;&#x8BFB;&#x53D6;&#x6A21;&#x5F0F;<span><a class="mark" href="_api_stream.html#stream_two_reading_modes" id="stream_two_reading_modes">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_two_reading_modes" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/two_reading_modes.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x53EF;&#x8BFB;&#x6D41;&#x8FD0;&#x4F5C;&#x4E8E;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x4E4B;&#x4E00;&#xFF1A;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#xFF08;flowing&#xFF09;&#x6216;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#xFF08;paused&#xFF09;&#x3002;</p>
<ul>
<li>&#x5728;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x6570;&#x636E;&#x81EA;&#x52A8;&#x4ECE;&#x5E95;&#x5C42;&#x7CFB;&#x7EDF;&#x8BFB;&#x53D6;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; <a href="/s/pGAddE"><code>EventEmitter</code></a> &#x63A5;&#x53E3;&#x7684;&#x4E8B;&#x4EF6;&#x5C3D;&#x53EF;&#x80FD;&#x5FEB;&#x5730;&#x88AB;&#x63D0;&#x4F9B;&#x7ED9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</li>
<li>&#x5728;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x5FC5;&#x987B;&#x663E;&#x5F0F;&#x8C03;&#x7528; <a href="/s/SpgRaa"><code>stream.read()</code></a> &#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5757;&#x3002;</li>
</ul>
<p>&#x6240;&#x6709;<a href="/s/YuDKX1">&#x53EF;&#x8BFB;&#x6D41;</a>&#x90FD;&#x5F00;&#x59CB;&#x4E8E;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x5207;&#x6362;&#x5230;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x6DFB;&#x52A0; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x3002;</li>
<li>&#x8C03;&#x7528; <a href="/s/Zhf28N"><code>stream.resume()</code></a>&#x3002;</li>
<li>&#x8C03;&#x7528; <a href="/s/Ea2ZNW"><code>stream.pipe()</code></a>&#x3002;</li>
</ul>
<p>&#x53EF;&#x8BFB;&#x6D41;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x5207;&#x6362;&#x56DE;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7BA1;&#x9053;&#x76EE;&#x6807;&#xFF0C;&#x5219;&#x8C03;&#x7528; <a href="/s/jqytVw"><code>stream.pause()</code></a>&#x3002;</li>
<li>&#x5982;&#x679C;&#x6709;&#x7BA1;&#x9053;&#x76EE;&#x6807;&#xFF0C;&#x5219;&#x79FB;&#x9664;&#x6240;&#x6709;&#x7BA1;&#x9053;&#x76EE;&#x6807;&#x3002;&#x8C03;&#x7528; <a href="/s/35GqHX"><code>stream.unpipe()</code></a> &#x53EF;&#x4EE5;&#x79FB;&#x9664;&#x591A;&#x4E2A;&#x7BA1;&#x9053;&#x76EE;&#x6807;&#x3002;</li>
</ul>
<p>&#x53EA;&#x6709;&#x63D0;&#x4F9B;&#x4E86;&#x6D88;&#x8D39;&#x6216;&#x5FFD;&#x7565;&#x6570;&#x636E;&#x7684;&#x673A;&#x5236;&#x540E;&#xFF0C;&#x53EF;&#x8BFB;&#x6D41;&#x624D;&#x4F1A;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x3002;
&#x5982;&#x679C;&#x6D88;&#x8D39;&#x7684;&#x673A;&#x5236;&#x88AB;&#x7981;&#x7528;&#x6216;&#x79FB;&#x9664;&#xFF0C;&#x5219;&#x53EF;&#x8BFB;&#x6D41;&#x4F1A;&#x505C;&#x6B62;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5411;&#x540E;&#x517C;&#x5BB9;&#xFF0C;&#x79FB;&#x9664; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x5730;&#x6682;&#x505C;&#x6D41;&#x3002;
&#x5982;&#x679C;&#x6709;&#x7BA1;&#x9053;&#x76EE;&#x6807;&#xFF0C;&#x4E00;&#x65E6;&#x76EE;&#x6807;&#x53D8;&#x4E3A; <code>drain</code> &#x72B6;&#x6001;&#x5E76;&#x8BF7;&#x6C42;&#x63A5;&#x6536;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5219;&#x8C03;&#x7528; <a href="/s/jqytVw"><code>stream.pause()</code></a> &#x4E5F;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x6D41;&#x4F1A;&#x4FDD;&#x6301;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x53EF;&#x8BFB;&#x6D41;&#x5207;&#x6362;&#x5230;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#xFF0C;&#x4E14;&#x6CA1;&#x6709;&#x53EF;&#x7528;&#x7684;&#x6D88;&#x8D39;&#x8005;&#x6765;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x6570;&#x636E;&#x5C06;&#x4F1A;&#x4E22;&#x5931;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x8C03;&#x7528; <code>readable.resume()</code> &#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x76D1;&#x542C; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x6216; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x5DF2;&#x79FB;&#x9664;&#x3002;</p>
<p>&#x6DFB;&#x52A0; <a href="/s/J6CZGb"><code>&apos;readable&apos;</code></a> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x4F1A;&#x4F7F;&#x6D41;&#x81EA;&#x52A8;&#x505C;&#x6B62;&#x6D41;&#x52A8;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; <a href="/s/SpgRaa"><code>readable.read()</code></a> &#x6D88;&#x8D39;&#x6570;&#x636E;&#x3002;
&#x5982;&#x679C; <a href="/s/J6CZGb"><code>&apos;readable&apos;</code></a> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#x88AB;&#x79FB;&#x9664;&#xFF0C;&#x4E14;&#x5B58;&#x5728; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#x53E5;&#x67C4;&#xFF0C;&#x5219;&#x6D41;&#x4F1A;&#x518D;&#x6B21;&#x5F00;&#x59CB;&#x6D41;&#x52A8;&#x3002;</p>
<h4>&#x4E09;&#x79CD;&#x72B6;&#x6001;<span><a class="mark" href="_api_stream.html#stream_three_states" id="stream_three_states">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_three_states" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/three_states.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x662F;&#x5BF9;&#x53D1;&#x751F;&#x5728;&#x53EF;&#x8BFB;&#x6D41;&#x4E2D;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x7684;&#x4E00;&#x79CD;&#x7B80;&#x5316;&#x7684;&#x62BD;&#x8C61;&#x3002;</p>
<p>&#x5728;&#x4EFB;&#x610F;&#x65F6;&#x523B;&#xFF0C;&#x53EF;&#x8BFB;&#x6D41;&#x4F1A;&#x5904;&#x4E8E;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#x72B6;&#x6001;&#x4E4B;&#x4E00;&#xFF1A;</p>
<ul>
<li><code>readable.readableFlowing === null</code></li>
<li><code>readable.readableFlowing === false</code></li>
<li><code>readable.readableFlowing === true</code></li>
</ul>
<p>&#x5F53; <code>readable.readableFlowing</code> &#x4E3A; <code>null</code> &#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6D88;&#x8D39;&#x6D41;&#x6570;&#x636E;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x6D41;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x3002;
&#x5728;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x76D1;&#x542C; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x3001;&#x8C03;&#x7528; <code>readable.pipe()</code>&#x3001;&#x6216;&#x8C03;&#x7528; <code>readable.resume()</code> &#x90FD;&#x4F1A;&#x4F7F; <code>readable.readableFlowing</code> &#x5207;&#x6362;&#x5230; <code>true</code>&#xFF0C;&#x53EF;&#x8BFB;&#x6D41;&#x5F00;&#x59CB;&#x4E3B;&#x52A8;&#x5730;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x5E76;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x3002;</p>
<p>&#x8C03;&#x7528; <code>readable.pause()</code>&#x3001;<code>readable.unpipe()</code>&#x3001;&#x6216;&#x63A5;&#x6536;&#x5230;&#x80CC;&#x538B;&#xFF0C;&#x5219; <code>readable.readableFlowing</code> &#x4F1A;&#x88AB;&#x8BBE;&#x4E3A; <code>false</code>&#xFF0C;&#x6682;&#x65F6;&#x505C;&#x6B62;&#x4E8B;&#x4EF6;&#x6D41;&#x52A8;&#x4F46;&#x4E0D;&#x4F1A;&#x505C;&#x6B62;&#x6570;&#x636E;&#x7684;&#x751F;&#x6210;&#x3002;
&#x5728;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x4E0B;&#xFF0C;&#x4E3A; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#x76D1;&#x542C;&#x5668;&#x4E0D;&#x4F1A;&#x4F7F; <code>readable.readableFlowing</code> &#x5207;&#x6362;&#x5230;&#xA0;<code>true</code>&#x3002;</p>
<pre><code class="language-js">const { PassThrough, Writable } = require(&apos;stream&apos;);
const pass = new PassThrough();
const writable = new Writable();

pass.pipe(writable);
pass.unpipe(writable);
// readableFlowing &#x73B0;&#x5728;&#x4E3A; false&#x3002;

pass.on(&apos;data&apos;, (chunk) =&gt; { console.log(chunk.toString()); });
pass.write(&apos;ok&apos;); // &#x4E0D;&#x4F1A;&#x89E6;&#x53D1; &apos;data&apos; &#x4E8B;&#x4EF6;&#x3002;
pass.resume(); // &#x5FC5;&#x987B;&#x8C03;&#x7528;&#x5B83;&#x624D;&#x4F1A;&#x89E6;&#x53D1; &apos;data&apos; &#x4E8B;&#x4EF6;&#x3002;
</code></pre>
<p>&#x5F53; <code>readable.readableFlowing</code> &#x4E3A; <code>false</code> &#x65F6;&#xFF0C;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4F1A;&#x5806;&#x79EF;&#x5728;&#x6D41;&#x7684;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x4E2D;&#x3002;</p>
<h4>&#x9009;&#x62E9;&#x4E00;&#x79CD;&#x63A5;&#x53E3;&#x98CE;&#x683C;<span><a class="mark" href="_api_stream.html#stream_choose_one_api_style" id="stream_choose_one_api_style">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_choose_one_api_style" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/choose_one_api_style.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x53EF;&#x8BFB;&#x6D41;&#x7684; API &#x8D2F;&#x7A7F;&#x4E86;&#x591A;&#x4E2A; Node.js &#x7248;&#x672C;&#xFF0C;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x6D88;&#x8D39;&#x6D41;&#x6570;&#x636E;&#x3002;
&#x5F00;&#x53D1;&#x8005;&#x901A;&#x5E38;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x5176;&#x4E2D;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x6D88;&#x8D39;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x8981;&#x5728;&#x5355;&#x4E2A;&#x6D41;&#x4F7F;&#x7528;&#x591A;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x6D88;&#x8D39;&#x6570;&#x636E;&#x3002;
&#x6DF7;&#x5408;&#x4F7F;&#x7528; <code>on(&apos;data&apos;)</code>&#x3001;<code>on(&apos;readable&apos;)</code>&#x3001;<code>pipe()</code> &#x6216;&#x5F02;&#x6B65;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x660E;&#x786E;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x7528;&#x6237;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528; <code>readable.pipe()</code>&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x6D88;&#x8D39;&#x6D41;&#x6570;&#x636E;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x3002;
&#x5982;&#x679C;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x7CBE;&#x7EC6;&#x5730;&#x63A7;&#x5236;&#x6570;&#x636E;&#x7684;&#x4F20;&#x9012;&#x4E0E;&#x4EA7;&#x751F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <a href="/s/pGAddE"><code>EventEmitter</code></a>&#x3001;<code>readable.on(&apos;readable&apos;)</code>/<code>readable.read()</code> &#x6216; <code>readable.pause()</code>/<code>readable.resume()</code>&#x3002;</p>
<h4>stream.Readable &#x7C7B;<span><a class="mark" href="_api_stream.html#stream_class_stream_readable" id="stream_class_stream_readable">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_class_stream_readable" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/class_stream_readable.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<!--type=class-->
<h5>&apos;close&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_close_1" id="stream_event_close_1">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_close_1" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_close_1.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<p>&#x5F53;&#x6D41;&#x6216;&#x5176;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#xFF08;&#x6BD4;&#x5982;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF09;&#x88AB;&#x5173;&#x95ED;&#x65F6;&#x89E6;&#x53D1;&#x3002;
&#x8868;&#x660E;&#x4E0D;&#x4F1A;&#x518D;&#x89E6;&#x53D1;&#x5176;&#x4ED6;&#x4E8B;&#x4EF6;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x518D;&#x53D1;&#x751F;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x4E0D;&#x662F;&#x6240;&#x6709;&#x53EF;&#x8BFB;&#x6D41;&#x90FD;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;close&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<h5>&apos;data&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_data" id="stream_event_data">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_data" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_data.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>chunk</code> <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x6570;&#x636E;&#x5757;&#x3002;
&#x5BF9;&#x4E8E;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C; <code>chunk</code> &#x53EF;&#x4EE5;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x6216; <code>Buffer</code>&#x3002;
&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C;<code>chunk</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55; JavaScript &#x503C;&#xFF0C;&#x9664;&#x4E86; <code>null</code>&#x3002;</li>
</ul>
<p>&#x5F53;&#x6D41;&#x5C06;&#x6570;&#x636E;&#x5757;&#x4F20;&#x9001;&#x7ED9;&#x6D88;&#x8D39;&#x8005;&#x540E;&#x89E6;&#x53D1;&#x3002;
&#x5F53;&#x8C03;&#x7528; <code>readable.pipe()</code>&#xFF0C;<code>readable.resume()</code> &#x6216;&#x7ED1;&#x5B9A;&#x76D1;&#x542C;&#x5668;&#x5230; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x65F6;&#xFF0C;&#x6D41;&#x4F1A;&#x8F6C;&#x6362;&#x5230;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x3002;
&#x5F53;&#x8C03;&#x7528; <code>readable.read()</code> &#x4E14;&#x6709;&#x6570;&#x636E;&#x5757;&#x8FD4;&#x56DE;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528; <code>readable.setEncoding()</code> &#x4E3A;&#x6D41;&#x6307;&#x5B9A;&#x4E86;&#x9ED8;&#x8BA4;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF0C;&#x5219;&#x76D1;&#x542C;&#x5668;&#x56DE;&#x8C03;&#x4F20;&#x5165;&#x7684;&#x6570;&#x636E;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5426;&#x5219;&#x4F20;&#x5165;&#x7684;&#x6570;&#x636E;&#x4E3A; <code>Buffer</code>&#x3002;</p>
<pre><code class="language-js">const readable = getReadableStreamSomehow();
readable.on(&apos;data&apos;, (chunk) =&gt; {
  console.log(`&#x63A5;&#x6536;&#x5230; ${chunk.length} &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;`);
});
</code></pre>
<h5>&apos;end&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_end" id="stream_event_end">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_end" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_end.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<p>&#x5F53;&#x6D41;&#x4E2D;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x53EF;&#x4F9B;&#x6D88;&#x8D39;&#x65F6;&#x89E6;&#x53D1;&#x3002;</p>
<p><code>&apos;end&apos;</code> &#x4E8B;&#x4EF6;&#x53EA;&#x6709;&#x5728;&#x6570;&#x636E;&#x88AB;&#x5B8C;&#x5168;&#x6D88;&#x8D39;&#x6389;&#x540E;&#x624D;&#x4F1A;&#x89E6;&#x53D1;&#x3002;
&#x8981;&#x60F3;&#x89E6;&#x53D1;&#x8BE5;&#x4E8B;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x6D41;&#x8F6C;&#x6362;&#x5230;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#xFF0C;&#x6216;&#x53CD;&#x590D;&#x8C03;&#x7528; <a href="/s/SpgRaa"><code>stream.read()</code></a> &#x76F4;&#x5230;&#x6570;&#x636E;&#x88AB;&#x6D88;&#x8D39;&#x5B8C;&#x3002;</p>
<pre><code class="language-js">const readable = getReadableStreamSomehow();
readable.on(&apos;data&apos;, (chunk) =&gt; {
  console.log(`&#x63A5;&#x6536;&#x5230; ${chunk.length} &#x4E2A;&#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;`);
});
readable.on(&apos;end&apos;, () =&gt; {
  console.log(&apos;&#x5DF2;&#x6CA1;&#x6709;&#x6570;&#x636E;&apos;);
});
</code></pre>
<h5>&apos;error&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_error_1" id="stream_event_error_1">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_error_1" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_error_1.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a></li>
</ul>
<p>&#x5F53;&#x6D41;&#x56E0;&#x5E95;&#x5C42;&#x5185;&#x90E8;&#x51FA;&#x9519;&#x800C;&#x4E0D;&#x80FD;&#x4EA7;&#x751F;&#x6570;&#x636E;&#x3001;&#x6216;&#x63A8;&#x9001;&#x65E0;&#x6548;&#x7684;&#x6570;&#x636E;&#x5757;&#x65F6;&#x89E6;&#x53D1;&#x3002;</p>
<h5>&apos;readable&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_event_readable" id="stream_event_readable">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_event_readable" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/event_readable.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v10.0.0</td>
<td><p>The <code>&apos;readable&apos;</code> is always emitted in the next tick after <code>.push()</code> is called</p></td></tr>
<tr><td>v10.0.0</td>
<td><p>Using <code>&apos;readable&apos;</code> requires calling <code>.read()</code>.</p></td></tr>
<tr><td>v0.9.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<p>&#x5F53;&#x6D41;&#x4E2D;&#x6709;&#x6570;&#x636E;&#x53EF;&#x4F9B;&#x8BFB;&#x53D6;&#x65F6;&#x89E6;&#x53D1;&#x3002;</p>
<pre><code class="language-javascript">const readable = getReadableStreamSomehow();
readable.on(&apos;readable&apos;, function() {
  // &#x6709;&#x6570;&#x636E;&#x53EF;&#x8BFB;&#x53D6;&#x3002;
  let data;

  while (data = this.read()) {
    console.log(data);
  }
});
</code></pre>
<p>&#x5F53;&#x5230;&#x8FBE;&#x6D41;&#x6570;&#x636E;&#x7684;&#x5C3D;&#x5934;&#x65F6;&#xFF0C;<code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;&#xFF0C;&#x4F46;&#x662F;&#x5728; <code>&apos;end&apos;</code> &#x4E8B;&#x4EF6;&#x4E4B;&#x524D;&#x89E6;&#x53D1;&#x3002;</p>
<p><code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x8868;&#x660E;&#x6D41;&#x6709;&#x65B0;&#x7684;&#x52A8;&#x6001;&#xFF1A;&#x8981;&#x4E48;&#x6709;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8981;&#x4E48;&#x5230;&#x8FBE;&#x6D41;&#x7684;&#x5C3D;&#x5934;&#x3002;
&#x5BF9;&#x4E8E;&#x524D;&#x8005;&#xFF0C;<a href="/s/SpgRaa"><code>stream.read()</code></a> &#x4F1A;&#x8FD4;&#x56DE;&#x53EF;&#x7528;&#x7684;&#x6570;&#x636E;&#x3002;
&#x5BF9;&#x4E8E;&#x540E;&#x8005;&#xFF0C;<a href="/s/SpgRaa"><code>stream.read()</code></a> &#x4F1A;&#x8FD4;&#x56DE; <code>null</code>&#x3002;
&#x4F8B;&#x5982;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;<code>foo.txt</code> &#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code class="language-js">const fs = require(&apos;fs&apos;);
const rr = fs.createReadStream(&apos;foo.txt&apos;);
rr.on(&apos;readable&apos;, () =&gt; {
  console.log(`&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;: ${rr.read()}`);
});
rr.on(&apos;end&apos;, () =&gt; {
  console.log(&apos;&#x7ED3;&#x675F;&apos;);
});
</code></pre>
<p>&#x8FD0;&#x884C;&#x4E0A;&#x9762;&#x7684;&#x811A;&#x672C;&#x8F93;&#x51FA;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="language-txt">$ node test.js
&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;: null
&#x7ED3;&#x675F;
</code></pre>
<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>readable.pipe()</code> &#x548C; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x7684;&#x673A;&#x5236;&#x6BD4; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;
&#x5904;&#x7406; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x541E;&#x5410;&#x91CF;&#x5347;&#x9AD8;&#x3002;</p>
<p>&#x5982;&#x679C;&#x540C;&#x65F6;&#x4F7F;&#x7528; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x548C; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#xFF0C;&#x5219; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x4F1A;&#x4F18;&#x5148;&#x63A7;&#x5236;&#x6D41;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;&#x8C03;&#x7528; <a href="/s/SpgRaa"><code>stream.read()</code></a> &#x65F6;&#x624D;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
<code>readableFlowing</code> &#x5C5E;&#x6027;&#x4F1A;&#x53D8;&#x6210; <code>false</code>&#x3002;
&#x5F53;&#x79FB;&#x9664; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x5219;&#x6D41;&#x4F1A;&#x5F00;&#x59CB;&#x6D41;&#x52A8;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x65E0;&#x9700;&#x8C03;&#x7528; <code>.resume()</code> &#x4E5F;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<h5>readable.destroy([error])<span><a class="mark" href="_api_stream.html#stream_readable_destroy_error" id="stream_readable_destroy_error">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_destroy_error" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_destroy_error.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>error</code> <a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a> &#x4F20;&#x7ED9; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x7684;&#x9519;&#x8BEF;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x9500;&#x6BC1;&#x6D41;&#xFF0C;&#x5E76;&#x89E6;&#x53D1; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x548C; <code>&apos;close&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x8C03;&#x7528;&#x540E;&#xFF0C;&#x53EF;&#x8BFB;&#x6D41;&#x5C06;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7684;&#x5185;&#x90E8;&#x8D44;&#x6E90;&#xFF0C;&#x4E14;&#x5FFD;&#x89C6;&#x540E;&#x7EED;&#x7684; <code>push()</code> &#x8C03;&#x7528;&#x3002;
&#x5B9E;&#x73B0;&#x6D41;&#x65F6;&#x4E0D;&#x5E94;&#x8BE5;&#x91CD;&#x5199;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x91CD;&#x5199; <a href="/s/2c9czW"><code>readable._destroy()</code></a>&#x3002;</p>
<h5>readable.isPaused()<span><a class="mark" href="_api_stream.html#stream_readable_ispaused" id="stream_readable_ispaused">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_ispaused" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_ispaused.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.11.14</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;&#xFF1A; <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x53EF;&#x8BFB;&#x6D41;&#x5F53;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#x72B6;&#x6001;&#x3002;
&#x4E3B;&#x8981;&#x7528;&#x4E8E; <code>readable.pipe()</code> &#x5E95;&#x5C42;&#x7684;&#x673A;&#x5236;&#x3002;
&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x65E0;&#x9700;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="language-js">const readable = new stream.Readable();

readable.isPaused(); // === false
readable.pause();
readable.isPaused(); // === true
readable.resume();
readable.isPaused(); // === false
</code></pre>
<h5>readable.pause()<span><a class="mark" href="_api_stream.html#stream_readable_pause" id="stream_readable_pause">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_pause" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_pause.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x4F7F;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#x505C;&#x6B62;&#x89E6;&#x53D1; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#xFF0C;&#x5E76;&#x5207;&#x6362;&#x51FA;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x3002;
&#x4EFB;&#x4F55;&#x53EF;&#x7528;&#x7684;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x4FDD;&#x7559;&#x5728;&#x5185;&#x90E8;&#x7F13;&#x5B58;&#x4E2D;&#x3002;</p>
<pre><code class="language-js">const readable = getReadableStreamSomehow();
readable.on(&apos;data&apos;, (chunk) =&gt; {
  console.log(`&#x63A5;&#x6536;&#x5230; ${chunk.length} &#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;`);
  readable.pause();
  console.log(&apos;&#x6682;&#x505C;&#x4E00;&#x79D2;&apos;);
  setTimeout(() =&gt; {
    console.log(&apos;&#x6570;&#x636E;&#x91CD;&#x65B0;&#x5F00;&#x59CB;&#x6D41;&#x52A8;&apos;);
    readable.resume();
  }, 1000);
});
</code></pre>
<p>&#x5982;&#x679C;&#x5B58;&#x5728; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#xFF0C;&#x5219;&#x8BE5;&#x65B9;&#x6CD5;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;</p>
<h5>readable.pipe(destination[, options])<span><a class="mark" href="_api_stream.html#stream_readable_pipe_destination_options" id="stream_readable_pipe_destination_options">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_pipe_destination_options" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_pipe_destination_options.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>destination</code> <a href="_api_stream.html#stream_class_stream_writable" class="type">&lt;stream.Writable&gt;</a> &#x6570;&#x636E;&#x5199;&#x5165;&#x7684;&#x76EE;&#x6807;&#x3002;</li>
<li>
<p><code>options</code> <a href="/s/_moz/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> &#x9009;&#x9879;&#x3002;</p>
<ul>
<li><code>end</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x5F53;&#x8BFB;&#x53D6;&#x5668;&#x7ED3;&#x675F;&#x65F6;&#x7EC8;&#x6B62;&#x5199;&#x5165;&#x5668;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; <code>true</code>&#x3002;</li>
</ul>
</li>
<li>&#x8FD4;&#x56DE;: <a href="_api_stream.html#stream_class_stream_writable" class="type">&lt;stream.Writable&gt;</a> &#x76EE;&#x6807;&#x53EF;&#x5199;&#x6D41;&#xFF0C;&#x5982;&#x679C;&#x662F; <a href="/s/2iRabr"><code>Duplex</code></a> &#x6D41;&#x6216; <a href="/s/fhVJQM"><code>Transform</code></a> &#x6D41;&#x5219;&#x53EF;&#x4EE5;&#x5F62;&#x6210;&#x7BA1;&#x9053;&#x94FE;&#x3002;</li>
</ul>
<p>&#x7ED1;&#x5B9A;&#x53EF;&#x5199;&#x6D41;&#x5230;&#x53EF;&#x8BFB;&#x6D41;&#xFF0C;&#x5C06;&#x53EF;&#x8BFB;&#x6D41;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x5230;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#xFF0C;&#x5E76;&#x5C06;&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x63A8;&#x9001;&#x5230;&#x7ED1;&#x5B9A;&#x7684;&#x53EF;&#x5199;&#x6D41;&#x3002;
&#x6570;&#x636E;&#x6D41;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x7BA1;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4F7F;&#x53EF;&#x8BFB;&#x6D41;&#x66F4;&#x5FEB;&#xFF0C;&#x76EE;&#x6807;&#x53EF;&#x5199;&#x6D41;&#x4E5F;&#x4E0D;&#x4F1A;&#x8D85;&#x8D1F;&#x8377;&#x3002;</p>
<p>&#x4F8B;&#x5B50;&#xFF0C;&#x5C06;&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x63A8;&#x9001;&#x5230; <code>file.txt</code> &#x6587;&#x4EF6;&#xFF1A;</p>
<pre><code class="language-js">const readable = getReadableStreamSomehow();
const writable = fs.createWriteStream(&apos;file.txt&apos;);
// readable &#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x63A8;&#x9001;&#x5230; &apos;file.txt&apos;&#x3002;
readable.pipe(writable);
</code></pre>
<p>&#x53EF;&#x4EE5;&#x5728;&#x5355;&#x4E2A;&#x53EF;&#x8BFB;&#x6D41;&#x4E0A;&#x7ED1;&#x5B9A;&#x591A;&#x4E2A;&#x53EF;&#x5199;&#x6D41;&#x3002;</p>
<p><code>readable.pipe()</code> &#x4F1A;&#x8FD4;&#x56DE;&#x76EE;&#x6807;&#x6D41;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x5BF9;&#x6D41;&#x8FDB;&#x884C;&#x94FE;&#x5F0F;&#x5730;&#x7BA1;&#x9053;&#x64CD;&#x4F5C;&#xFF1A;</p>
<pre><code class="language-js">const fs = require(&apos;fs&apos;);
const r = fs.createReadStream(&apos;file.txt&apos;);
const z = zlib.createGzip();
const w = fs.createWriteStream(&apos;file.txt.gz&apos;);
r.pipe(z).pipe(w);
</code></pre>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6765;&#x6E90;&#x53EF;&#x8BFB;&#x6D41;&#x89E6;&#x53D1; <a href="/s/ZgviqU"><code>&apos;end&apos;</code></a> &#x4E8B;&#x4EF6;&#x65F6;&#xFF0C;&#x76EE;&#x6807;&#x53EF;&#x5199;&#x6D41;&#x4E5F;&#x4F1A;&#x8C03;&#x7528; <a href="/s/nvArK4"><code>stream.end()</code></a> &#x7ED3;&#x675F;&#x5199;&#x5165;&#x3002;
&#x82E5;&#x8981;&#x7981;&#x7528;&#x8FD9;&#x79CD;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#xFF0C;<code>end</code> &#x9009;&#x9879;&#x5E94;&#x8BBE;&#x4E3A; <code>false</code>&#xFF0C;&#x8FD9;&#x6837;&#x76EE;&#x6807;&#x6D41;&#x5C31;&#x4F1A;&#x4FDD;&#x6301;&#x6253;&#x5F00;&#xFF1A;</p>
<pre><code class="language-js">reader.pipe(writer, { end: false });
reader.on(&apos;end&apos;, () =&gt; {
  writer.end(&apos;&#x7ED3;&#x675F;&apos;);
});
</code></pre>
<p>&#x5982;&#x679C;&#x53EF;&#x8BFB;&#x6D41;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x76EE;&#x6807;&#x53EF;&#x5199;&#x6D41;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x5173;&#x95ED;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5173;&#x95ED;&#x6240;&#x6709;&#x6D41;&#x4EE5;&#x907F;&#x514D;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x3002;</p>
<h5>readable.read([size])<span><a class="mark" href="_api_stream.html#stream_readable_read_size" id="stream_readable_read_size">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_read_size" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_read_size.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>size</code> <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a> &#x8981;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x7684;&#x5B57;&#x8282;&#x6570;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Data_structures#Null_type" class="type">&lt;null&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a></li>
</ul>
<p>&#x4ECE;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x62C9;&#x53D6;&#x5E76;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x3002;
&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53EF;&#x8BFB;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; <code>null</code>&#x3002;
&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;<code>readable.read()</code> &#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x662F; <code>Buffer</code> &#x5BF9;&#x8C61;&#xFF0C;&#x9664;&#x975E;&#x4F7F;&#x7528; <code>readable.setEncoding()</code> &#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x6216;&#x6D41;&#x5904;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x53EF;&#x8BFB;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x8DB3; <code>size</code> &#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x5269;&#x4F59;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x6D41;&#x5DF2;&#x7ECF;&#x7ED3;&#x675F;&#x5219;&#x8FD4;&#x56DE; <code>null</code>&#x3002;</p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A; <code>size</code> &#x53C2;&#x6570;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x3002;</p>
<p><code>readable.read()</code> &#x5E94;&#x8BE5;&#x53EA;&#x5BF9;&#x5904;&#x4E8E;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#x8C03;&#x7528;&#x3002;
&#x5728;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;<code>readable.read()</code> &#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x76F4;&#x5230;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x5B8C;&#x5168;&#x8017;&#x5C3D;&#x3002;</p>
<pre><code class="language-js">const readable = getReadableStreamSomehow();
readable.on(&apos;readable&apos;, () =&gt; {
  let chunk;
  while (null !== (chunk = readable.read())) {
    console.log(`&#x63A5;&#x6536;&#x5230; ${chunk.length} &#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;`);
  }
});
</code></pre>
<p>&#x5982;&#x679C; <code>readable.read()</code> &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x5219; <code>&apos;data&apos;</code>&#x4E8B;&#x4EF6;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;&#x3002;</p>
<p><a href="/s/ZgviqU"><code>&apos;end&apos;</code></a> &#x4E8B;&#x4EF6;&#x89E6;&#x53D1;&#x540E;&#x518D;&#x8C03;&#x7528; <a href="/s/SpgRaa"><code>stream.read([size])</code></a> &#x4F1A;&#x8FD4;&#x56DE;<code>null</code>&#xFF0C;&#x4E0D;&#x4F1A;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;</p>
<h5>readable.readableHighWaterMark<span><a class="mark" href="_api_stream.html#stream_readable_readablehighwatermark" id="stream_readable_readablehighwatermark">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_readablehighwatermark" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_readablehighwatermark.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v9.3.0</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x6784;&#x9020;&#x53EF;&#x8BFB;&#x6D41;&#x65F6;&#x4F20;&#x5165;&#x7684; <code>highWaterMark</code> &#x7684;&#x503C;&#x3002;</p>
<h5>readable.readableLength<span><a class="mark" href="_api_stream.html#stream_readable_readablelength" id="stream_readable_readablelength">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_readablelength" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_readablelength.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v9.4.0</span>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a></li>
</ul>
<p>&#x8FD4;&#x56DE;&#x961F;&#x5217;&#x4E2D;&#x51C6;&#x5907;&#x8BFB;&#x53D6;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF08;&#x6216;&#x5BF9;&#x8C61;&#x6570;&#xFF09;&#x3002;</p>
<h5>readable.resume()<span><a class="mark" href="_api_stream.html#stream_readable_resume" id="stream_readable_resume">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_resume" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_resume.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v10.0.0</td>
<td><p>The <code>resume()</code> has no effect if there is a <code>&apos;readable&apos;</code> event listening.</p></td></tr>
<tr><td>v0.9.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x5C06;&#x88AB;&#x6682;&#x505C;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#x6062;&#x590D;&#x89E6;&#x53D1; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#xFF0C;&#x5E76;&#x5C06;&#x6D41;&#x5207;&#x6362;&#x5230;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x3002;</p>
<p><code>readable.resume()</code> &#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5145;&#x5206;&#x6D88;&#x8017;&#x6D41;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x65E0;&#x9700;&#x5B9E;&#x9645;&#x5904;&#x7406;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#xFF1A;</p>
<pre><code class="language-js">getReadableStreamSomehow()
  .resume()
  .on(&apos;end&apos;, () =&gt; {
    console.log(&apos;&#x5230;&#x8FBE;&#x6D41;&#x7684;&#x5C3D;&#x5934;&#xFF0C;&#x4F46;&#x65E0;&#x9700;&#x8BFB;&#x53D6;&#x4EFB;&#x4F55;&#x6570;&#x636E;&apos;);
  });
</code></pre>
<p>&#x5F53;&#x5B58;&#x5728; <code>&apos;readable&apos;</code> &#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x5668;&#x65F6;&#xFF0C;<code>readable.resume()</code> &#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;</p>
<h5>readable.setEncoding(encoding)<span><a class="mark" href="_api_stream.html#stream_readable_setencoding_encoding" id="stream_readable_setencoding_encoding">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_setencoding_encoding" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_setencoding_encoding.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x4E3A;&#x4ECE;&#x53EF;&#x8BFB;&#x6D41;&#x8BFB;&#x53D6;&#x7684;&#x6570;&#x636E;&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF0C;&#x6D41;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7684;&#x662F; <code>Buffer</code> &#x5BF9;&#x8C61;&#x3002;
&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF0C;&#x5219;&#x6D41;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x6307;&#x5B9A;&#x7F16;&#x7801;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;&#x8C03;&#x7528; <code>readable.setEncoding(&apos;utf-8&apos;)</code> &#x4F1A;&#x5C06;&#x6570;&#x636E;&#x89E3;&#x6790;&#x4E3A; UTF-8 &#x6570;&#x636E;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8C03;&#x7528; <code>readable.setEncoding(&apos;hex&apos;)</code> &#x5219;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x7F16;&#x7801;&#x6210;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<pre><code class="language-js">const readable = getReadableStreamSomehow();
readable.setEncoding(&apos;utf8&apos;);
readable.on(&apos;data&apos;, (chunk) =&gt; {
  assert.equal(typeof chunk, &apos;string&apos;);
  console.log(&apos;&#x8BFB;&#x53D6;&#x5230; %d &#x4E2A;&#x5B57;&#x7B26;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x636E;&apos;, chunk.length);
});
</code></pre>
<h5>readable.unpipe([destination])<span><a class="mark" href="_api_stream.html#stream_readable_unpipe_destination" id="stream_readable_unpipe_destination">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_unpipe_destination" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_unpipe_destination.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>destination</code> <a href="_api_stream.html#stream_class_stream_writable" class="type">&lt;stream.Writable&gt;</a> &#x8981;&#x79FB;&#x9664;&#x7BA1;&#x9053;&#x7684;&#x53EF;&#x5199;&#x6D41;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x89E3;&#x7ED1;&#x4E4B;&#x524D;&#x4F7F;&#x7528; <a href="/s/Ea2ZNW"><code>stream.pipe()</code></a> &#x7ED1;&#x5B9A;&#x7684;&#x53EF;&#x5199;&#x6D41;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6307;&#x5B9A; <code>destination</code>, &#x5219;&#x89E3;&#x7ED1;&#x6240;&#x6709;&#x7BA1;&#x9053;.</p>
<p>&#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86; <code>destination</code>, &#x4F46;&#x5B83;&#x6CA1;&#x6709;&#x5EFA;&#x7ACB;&#x7BA1;&#x9053;&#xFF0C;&#x5219;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;.</p>
<pre><code class="language-js">const fs = require(&apos;fs&apos;);
const readable = getReadableStreamSomehow();
const writable = fs.createWriteStream(&apos;file.txt&apos;);
// &#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5F00;&#x59CB;&#x4F20;&#x8F93;&#x5230; &apos;file.txt&apos;&#xFF0C;&#x4F46;&#x4E00;&#x79D2;&#x540E;&#x505C;&#x6B62;&#x3002;
readable.pipe(writable);
setTimeout(() =&gt; {
  console.log(&apos;&#x505C;&#x6B62;&#x5199;&#x5165; file.txt&apos;);
  readable.unpipe(writable);
  console.log(&apos;&#x624B;&#x52A8;&#x5173;&#x95ED;&#x6587;&#x4EF6;&#x6D41;&apos;);
  writable.end();
}, 1000);
</code></pre>
<h5>readable.unshift(chunk)<span><a class="mark" href="_api_stream.html#stream_readable_unshift_chunk" id="stream_readable_unshift_chunk">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_unshift_chunk" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_unshift_chunk.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>chunk</code> argument can now be a <code>Uint8Array</code> instance.</p></td></tr>
<tr><td>v0.9.11</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.11</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>chunk</code> <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> | <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x8981;&#x63A8;&#x56DE;&#x53EF;&#x8BFB;&#x961F;&#x5217;&#x7684;&#x6570;&#x636E;&#x5757;&#x3002;
		&#x5BF9;&#x4E8E;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;<code>chunk</code> &#x5FC5;&#x987B;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3001;<code>Buffer</code> &#x6216; <code>Uint8Array</code>&#x3002;
&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C;<code>chunk</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;&#x503C;&#xFF0C;&#x9664;&#x4E86; <code>null</code>&#x3002;</li>
</ul>
<p>&#x5C06;&#x6570;&#x636E;&#x5757;&#x63A8;&#x56DE;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x3002;
&#x53EF;&#x7528;&#x4E8E;&#x4EE5;&#x4E0B;&#x60C5;&#x666F;&#xFF1A;&#x6B63;&#x88AB;&#x6D88;&#x8D39;&#x4E2D;&#x7684;&#x6D41;&#x9700;&#x8981;&#x5C06;&#x4E00;&#x4E9B;&#x5DF2;&#x7ECF;&#x88AB;&#x62C9;&#x51FA;&#x7684;&#x6570;&#x636E;&#x91CD;&#x7F6E;&#x4E3A;&#x672A;&#x6D88;&#x8D39;&#x72B6;&#x6001;&#xFF0C;&#x4EE5;&#x4FBF;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4F20;&#x7ED9;&#x5176;&#x4ED6;&#x65B9;&#x3002;</p>
<p>&#x89E6;&#x53D1; <a href="/s/ZgviqU"><code>&apos;end&apos;</code></a> &#x4E8B;&#x4EF6;&#x6216;&#x629B;&#x51FA;&#x8FD0;&#x884C;&#x65F6;&#x9519;&#x8BEF;&#x4E4B;&#x540E;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x8C03;&#x7528; <code>stream.unshift()</code>&#x3002;</p>
<p>&#x4F7F;&#x7528; <code>stream.unshift()</code> &#x7684;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5207;&#x6362;&#x5230; <a href="/s/fhVJQM"><code>Transform</code></a> &#x6D41;&#x3002;
&#x8BE6;&#x89C1;<a href="/s/d2EgSi">&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x6D41;&#x7684;API</a>&#x3002;</p>
<pre><code class="language-js">// Pull off a header delimited by \n\n
// use unshift() if we get too much
// Call the callback with (error, header, stream)
const { StringDecoder } = require(&apos;string_decoder&apos;);
function parseHeader(stream, callback) {
  stream.on(&apos;error&apos;, callback);
  stream.on(&apos;readable&apos;, onReadable);
  const decoder = new StringDecoder(&apos;utf8&apos;);
  let header = &apos;&apos;;
  function onReadable() {
    let chunk;
    while (null !== (chunk = stream.read())) {
      const str = decoder.write(chunk);
      if (str.match(/\n\n/)) {
        // &#x53D1;&#x73B0;&#x5934;&#x90E8;&#x8FB9;&#x754C;&#x3002;
        const split = str.split(/\n\n/);
        header += split.shift();
        const remaining = split.join(&apos;\n\n&apos;);
        const buf = Buffer.from(remaining, &apos;utf8&apos;);
        stream.removeListener(&apos;error&apos;, callback);
        // &#x5728;&#x8C03;&#x7528; unshift() &#x524D;&#x79FB;&#x9664; &apos;readable&apos; &#x76D1;&#x542C;&#x5668;&#x3002;
        stream.removeListener(&apos;readable&apos;, onReadable);
        if (buf.length)
          stream.unshift(buf);
        // &#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x4ECE;&#x6D41;&#x4E2D;&#x8BFB;&#x53D6;&#x6D88;&#x606F;&#x7684;&#x4E3B;&#x4F53;&#x3002;
        callback(null, header, stream);
      } else {
        // &#x7EE7;&#x7EED;&#x8BFB;&#x53D6;&#x5934;&#x90E8;&#x3002;
        header += str;
      }
    }
  }
}
</code></pre>
<h5>readable.wrap(stream)<span><a class="mark" href="_api_stream.html#stream_readable_wrap_stream" id="stream_readable_wrap_stream">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_wrap_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_wrap_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<ul>
<li><code>stream</code> <a href="_api_stream.html#stream_stream" class="type">&lt;Stream&gt;</a> &#x8001;&#x7248;&#x672C;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Reference/Operators/this" class="type">&lt;this&gt;</a></li>
</ul>
<p>&#x5728; Node.js v0.10 &#x4E4B;&#x524D;&#xFF0C;&#x6D41;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x5F53;&#x524D;&#x5B9A;&#x4E49;&#x7684;&#x6240;&#x6709;&#x7684;&#x6D41;&#x6A21;&#x5757; API&#x3002;&#xFF08;&#x8BE6;&#x89C1;<a href="/s/yPPNyE">&#x517C;&#x5BB9;&#x6027;</a>&#xFF09;</p>
<p>&#x5F53;&#x4F7F;&#x7528;&#x8001;&#x7248;&#x672C;&#x7684; Node.js &#x65F6;&#xFF0C;&#x53EA;&#x80FD;&#x89E6;&#x53D1; <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> &#x4E8B;&#x4EF6;&#x6216;&#x8C03;&#x7528; <a href="/s/jqytVw"><code>stream.pause()</code></a> &#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>readable.wrap()</code> &#x521B;&#x5EFA;&#x8001;&#x7248;&#x672C;&#x7684;&#x6D41;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x51E0;&#x4E4E;&#x65E0;&#x9700;&#x4F7F;&#x7528; <code>readable.wrap()</code>&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8001;&#x7248;&#x672C;&#x7684; Node.js &#x5E94;&#x7528;&#x548C;&#x5E93;&#x3002;</p>
<p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="language-js">const { OldReader } = require(&apos;./old-api-module.js&apos;);
const { Readable } = require(&apos;stream&apos;);
const oreader = new OldReader();
const myReader = new Readable().wrap(oreader);

myReader.on(&apos;readable&apos;, () =&gt; {
  myReader.read(); // &#x5404;&#x79CD;&#x64CD;&#x4F5C;&#x3002;
});
</code></pre>
<h5>readable[Symbol.asyncIterator]()<span><a class="mark" href="_api_stream.html#stream_readable_symbol_asynciterator" id="stream_readable_symbol_asynciterator">#</a></span></h5><p class="tip_wrap"><span class="tip_depre">&#x672C;&#x6BB5;&#x843D;&#x6682;&#x4E0D;&#x63D0;&#x4F9B;&#x7FFB;&#x8BD1;</span></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v10.0.0</span>
</div>
<p></p><div class="api_stability api_stability_1"><a href="_api_documentation.html#documentation_stability_index">Stability: 1</a> - Experimental</div><p></p>
<ul>
<li>Returns: <a href="https://github.com/tc39/proposal-async-iteration" class="type">&lt;AsyncIterator&gt;</a> to fully consume the stream.</li>
</ul>
<pre><code class="language-js">const fs = require(&apos;fs&apos;);

async function print(readable) {
  readable.setEncoding(&apos;utf8&apos;);
  let data = &apos;&apos;;
  for await (const k of readable) {
    data += k;
  }
  console.log(data);
}

print(fs.createReadStream(&apos;file&apos;)).catch(console.log);
</code></pre>
<p>If the loop terminates with a <code>break</code> or a <code>throw</code>, the stream will be
destroyed. In other terms, iterating over a stream will consume the stream
fully. The stream will be read in chunks of size equal to the <code>highWaterMark</code>
option. In the code example above, data will be in a single chunk if the file
has less then 64kb of data because no <code>highWaterMark</code> option is provided to
<a href="/s/wiVPXD"><code>fs.createReadStream()</code></a>.</p>
<h3>&#x53CC;&#x5DE5;&#x6D41;&#x4E0E;&#x8F6C;&#x6362;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_duplex_and_transform_streams" id="stream_duplex_and_transform_streams">#</a></span></h3>
<h4>stream.Duplex &#x7C7B;<span><a class="mark" href="_api_stream.html#stream_class_stream_duplex" id="stream_class_stream_duplex">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_class_stream_duplex" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/class_stream_duplex.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v6.8.0</td>
<td><p>Instances of <code>Duplex</code> now return <code>true</code> when checking <code>instanceof stream.Writable</code>.</p></td></tr>
<tr><td>v0.9.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<!--type=class-->
<p>&#x53CC;&#x5DE5;&#x6D41;&#xFF08;Duplex&#xFF09;&#x662F;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86; <a href="/s/YuDKX1"><code>Readable</code></a> &#x548C; <a href="/s/9JUnJ8"><code>Writable</code></a> &#x63A5;&#x53E3;&#x7684;&#x6D41;&#x3002;</p>
<p><code>Duplex</code> &#x6D41;&#x7684;&#x4F8B;&#x5B50;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><a href="/s/wsJ1o1">TCP socket</a></li>
<li><a href="/s/duYbh2">zlib &#x6D41;</a></li>
<li><a href="/s/FuEfsg">crypto &#x6D41;</a></li>
</ul>
<h4>stream.Transform &#x7C7B;<span><a class="mark" href="_api_stream.html#stream_class_stream_transform" id="stream_class_stream_transform">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_class_stream_transform" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/class_stream_transform.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span>
</div>
<!--type=class-->
<p>&#x8F6C;&#x6362;&#x6D41;&#xFF08;Transform&#xFF09;&#x662F;&#x4E00;&#x79CD; <a href="/s/2iRabr"><code>Duplex</code></a> &#x6D41;&#xFF0C;&#x4F46;&#x5B83;&#x7684;&#x8F93;&#x51FA;&#x4E0E;&#x8F93;&#x5165;&#x662F;&#x76F8;&#x5173;&#x8054;&#x7684;&#x3002;
&#x4E0E; <a href="/s/2iRabr"><code>Duplex</code></a> &#x6D41;&#x4E00;&#x6837;&#xFF0C;<code>Transform</code> &#x6D41;&#x4E5F;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86; <a href="/s/YuDKX1"><code>Readable</code></a> &#x548C; <a href="/s/9JUnJ8"><code>Writable</code></a> &#x63A5;&#x53E3;&#x3002;</p>
<p><code>Transform</code> &#x6D41;&#x7684;&#x4F8B;&#x5B50;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li><a href="/s/duYbh2">zlib &#x6D41;</a></li>
<li><a href="/s/FuEfsg">crypto &#x6D41;</a></li>
</ul>
<h5>transform.destroy([error])<span><a class="mark" href="_api_stream.html#stream_transform_destroy_error" id="stream_transform_destroy_error">#</a></span></h5><p class="tip_wrap"><a href="_api_en_stream.html#stream_transform_destroy_error" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/transform_destroy_error.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>error</code> <a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a></li>
</ul>
<p>&#x9500;&#x6BC1;&#x6D41;&#xFF0C;&#x5E76;&#x89E6;&#x53D1; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x540E;&#xFF0C;transform &#x6D41;&#x4F1A;&#x91CA;&#x653E;&#x5168;&#x90E8;&#x5185;&#x90E8;&#x8D44;&#x6E90;&#x3002;
&#x5B9E;&#x73B0;&#x8005;&#x4E0D;&#x8981;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x5E94;&#x8BE5;&#x5B9E;&#x73B0; <a href="/s/2c9czW"><code>readable._destroy()</code></a>&#x3002;
<code>Transform</code> &#x6D41;&#x7684; <code>_destroy()</code> &#x65B9;&#x6CD5;&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;close&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<h3>stream.finished(stream, callback)<span><a class="mark" href="_api_stream.html#stream_stream_finished_stream_callback" id="stream_stream_finished_stream_callback">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_stream_finished_stream_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/stream_finished_stream_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v10.0.0</span>
</div>
<ul>
<li><code>stream</code> <a href="_api_stream.html#stream_stream" class="type">&lt;Stream&gt;</a> &#x53EF;&#x8BFB;&#x6D41;&#x6216;&#x53EF;&#x5199;&#x6D41;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x901A;&#x77E5;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>&#x5F53;&#x6D41;&#x4E0D;&#x518D;&#x53EF;&#x8BFB;&#x3001;&#x53EF;&#x5199;&#x3001;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x3001;&#x6216;&#x63D0;&#x524D;&#x5173;&#x95ED;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;&#x8BE5;&#x51FD;&#x6570;&#x83B7;&#x5F97;&#x901A;&#x77E5;&#x3002;</p>
<pre><code class="language-js">const { finished } = require(&apos;stream&apos;);

const rs = fs.createReadStream(&apos;archive.tar&apos;);

finished(rs, (err) =&gt; {
  if (err) {
    console.error(&apos;&#x6D41;&#x53D1;&#x751F;&#x9519;&#x8BEF;&apos;, err);
  } else {
    console.log(&apos;&#x6D41;&#x5DF2;&#x8BFB;&#x53D6;&#x5B8C;&apos;);
  }
});

rs.resume(); // &#x5F00;&#x59CB;&#x8BFB;&#x53D6;&#x6D41;&#x3002;
</code></pre>
<p>&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x6D41;&#x88AB;&#x63D0;&#x524D;&#x9500;&#x6BC1;&#xFF08;&#x5982; HTTP &#x8BF7;&#x6C42;&#x88AB;&#x4E2D;&#x6B62;&#xFF09;&#x7B49;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#xFF0C;&#x6B64;&#x65F6;&#x6D41;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;end&apos;</code> &#x6216; <code>&apos;finish&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<p><code>finished</code> &#x63A5;&#x53E3;&#x4E5F;&#x53EF;&#x4EE5; Promise &#x5316;&#xFF1A;</p>
<pre><code class="language-js">const finished = util.promisify(stream.finished);

const rs = fs.createReadStream(&apos;archive.tar&apos;);

async function run() {
  await finished(rs);
  console.log(&apos;&#x6D41;&#x5DF2;&#x8BFB;&#x53D6;&#x5B8C;&apos;);
}

run().catch(console.error);
rs.resume(); // &#x5F00;&#x59CB;&#x8BFB;&#x53D6;&#x6D41;&#x3002;
</code></pre>
<h3>stream.pipeline(...streams[, callback])<span><a class="mark" href="_api_stream.html#stream_stream_pipeline_streams_callback" id="stream_stream_pipeline_streams_callback">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_stream_pipeline_streams_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/stream_pipeline_streams_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v10.0.0</span>
</div>
<ul>
<li><code>...streams</code> <a href="_api_stream.html#stream_stream" class="type">&lt;Stream&gt;</a> &#x8981;&#x7528;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x7684;&#x4E24;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6D41;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x901A;&#x77E5;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>&#x4F7F;&#x7528;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x591A;&#x4E2A;&#x6D41;&#xFF0C;&#x5E76;&#x4F20;&#x9012;&#x9519;&#x8BEF;&#x4E0E;&#x5B8C;&#x6210;&#x6E05;&#x7406;&#x5DE5;&#x4F5C;&#xFF0C;&#x5F53;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x5B8C;&#x6210;&#x65F6;&#x901A;&#x77E5;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<pre><code class="language-js">const { pipeline } = require(&apos;stream&apos;);
const fs = require(&apos;fs&apos;);
const zlib = require(&apos;zlib&apos;);

// &#x4F7F;&#x7528; pipeline &#x63A5;&#x53E3;&#x8FDE;&#x63A5;&#x591A;&#x4E2A;&#x6D41;&#xFF0C;&#x5E76;&#x5728;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x5B8C;&#x6210;&#x65F6;&#x83B7;&#x5F97;&#x901A;&#x77E5;&#x3002;
// &#x4F7F;&#x7528; pipeline &#x53EF;&#x4EE5;&#x9AD8;&#x6548;&#x5730;&#x538B;&#x7F29;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x5F88;&#x5927;&#x7684; tar &#x6587;&#x4EF6;&#xFF1A;

pipeline(
  fs.createReadStream(&apos;archive.tar&apos;),
  zlib.createGzip(),
  fs.createWriteStream(&apos;archive.tar.gz&apos;),
  (err) =&gt; {
    if (err) {
      console.error(&apos;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&apos;, err);
    } else {
      console.log(&apos;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x6210;&#x529F;&apos;);
    }
  }
);
</code></pre>
<p><code>pipeline</code> &#x63A5;&#x53E3;&#x4E5F;&#x53EF;&#x4EE5; Promise &#x5316;&#xFF1A;</p>
<pre><code class="language-js">const pipeline = util.promisify(stream.pipeline);

async function run() {
  await pipeline(
    fs.createReadStream(&apos;archive.tar&apos;),
    zlib.createGzip(),
    fs.createWriteStream(&apos;archive.tar.gz&apos;)
  );
  console.log(&apos;&#x7BA1;&#x9053;&#x8FDE;&#x63A5;&#x6210;&#x529F;&apos;);
}

run().catch(console.error);
</code></pre>
<h2>&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x6D41;&#x7684; API<span><a class="mark" href="_api_stream.html#stream_api_for_stream_implementers" id="stream_api_for_stream_implementers">#</a></span></h2><p class="tip_wrap"><a href="_api_en_stream.html#stream_api_for_stream_implementers" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/api_for_stream_implementers.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<!--type=misc-->
<p><code>stream</code> &#x6A21;&#x5757; API &#x7684;&#x8BBE;&#x8BA1;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x5BB9;&#x6613;&#x4F7F;&#x7528; JavaScript &#x7684;&#x539F;&#x578B;&#x7EE7;&#x627F;&#x6A21;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x6D41;&#x3002;</p>
<p>&#x6D41;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x65B0;&#x7684; JavaScript &#x7C7B;&#x5E76;&#x7EE7;&#x627F;&#x56DB;&#x4E2A;&#x57FA;&#x672C;&#x6D41;&#x7C7B;&#x4E2D;&#x4E4B;&#x4E00;&#xFF08;<code>stream.Writeable</code>&#x3001;<code>stream.Readable</code>&#x3001;<code>stream.Duplex</code> &#x6216; <code>stream.Transform</code>&#xFF09;&#xFF0C;&#x4E14;&#x786E;&#x4FDD;&#x8C03;&#x7528;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x7236;&#x7C7B;&#x6784;&#x9020;&#x5668;:</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);

class MyWritable extends Writable {
  constructor(options) {
    super(options);
    // ...
  }
}
</code></pre>
<p>&#x6839;&#x636E;&#x6240;&#x521B;&#x5EFA;&#x7684;&#x6D41;&#x7C7B;&#x578B;&#xFF0C;&#x65B0;&#x7684;&#x6D41;&#x7C7B;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;:</p>






























<table><thead><tr><th>&#x7528;&#x4F8B;</th><th>&#x7C7B;</th><th>&#x9700;&#x5B9E;&#x73B0;&#x7684;&#x65B9;&#x6CD5;</th></tr></thead><tbody><tr><td>&#x53EA;&#x8BFB;&#x6D41;</td><td><a href="/s/YuDKX1"><code>Readable</code></a></td><td><code><a href="/s/5hv4Rd">_read</a></code></td></tr><tr><td>&#x53EA;&#x5199;&#x6D41;</td><td><a href="/s/9JUnJ8"><code>Writable</code></a></td><td><code><a href="/s/8MvCPB">_write</a></code>, <code><a href="/s/7qpAhU">_writev</a></code>, <code><a href="/s/ehUmqz">_final</a></code></td></tr><tr><td>&#x53EF;&#x8BFB;&#x53EF;&#x5199;&#x6D41;</td><td><a href="/s/2iRabr"><code>Duplex</code></a></td><td><code><a href="/s/5hv4Rd">_read</a></code>, <code><a href="/s/8MvCPB">_write</a></code>, <code><a href="/s/7qpAhU">_writev</a></code>, <code><a href="/s/ehUmqz">_final</a></code></td></tr><tr><td>&#x5BF9;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;</td><td><a href="/s/fhVJQM"><code>Transform</code></a></td><td><code><a href="/s/N8nFbP">_transform</a></code>, <code><a href="/s/mErApk">_flush</a></code>, <code><a href="/s/ehUmqz">_final</a></code></td></tr></tbody></table>
<p>&#x5B9E;&#x73B0;&#x6D41;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x4E0D;&#x5E94;&#x8BE5;&#x8C03;&#x7528;&#x6D41;&#x7684;&#x516C;&#x5171;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x662F;&#x7ED9;&#x6D88;&#x8D39;&#x8005;&#x4F7F;&#x7528;&#x7684;&#xFF08;&#x8BE6;&#x89C1;<a href="/s/6tpdeZ">&#x7528;&#x4E8E;&#x6D88;&#x8D39;&#x6D41;&#x7684;API</a>&#xFF09;&#x3002;
&#x8FD9;&#x6837;&#x505A;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4F7F;&#x7528;&#x6D41;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4EA7;&#x751F;&#x4E0D;&#x5229;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x3002;</p>
<h3>&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;<span><a class="mark" href="_api_stream.html#stream_simplified_construction" id="stream_simplified_construction">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_simplified_construction" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/simplified_construction.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v1.2.0</span>
</div>
<p>&#x5BF9;&#x4E8E;&#x7B80;&#x5355;&#x7684;&#x6848;&#x4F8B;&#xFF0C;&#x6784;&#x9020;&#x6D41;&#x53EF;&#x4EE5;&#x4E0D;&#x4F9D;&#x8D56;&#x7EE7;&#x627F;&#x3002;
&#x76F4;&#x63A5;&#x521B;&#x5EFA; <code>stream.Writable</code>&#x3001;<code>stream.Readable</code>&#x3001;<code>stream.Duplex</code> &#x6216; <code>stream.Transform</code> &#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x4F20;&#x5165;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x9009;&#x9879;&#x3002;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);

const myWritable = new Writable({
  write(chunk, encoding, callback) {
    // ...
  }
});
</code></pre>
<h3>&#x5B9E;&#x73B0;&#x53EF;&#x5199;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_implementing_a_writable_stream" id="stream_implementing_a_writable_stream">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_implementing_a_writable_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/implementing_a_writable_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p><code>stream.Writable</code> &#x7C7B;&#x53EF;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x53EF;&#x5199;&#x6D41;&#x3002;</p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x53EF;&#x5199;&#x6D41;&#x5FC5;&#x987B;&#x8C03;&#x7528; <code>new stream.Writable([options])</code> &#x6784;&#x9020;&#x51FD;&#x6570;&#x5E76;&#x5B9E;&#x73B0; <code>writable._write()</code> &#x65B9;&#x6CD5;&#xFF0C;<code>writable._writev()</code> &#x65B9;&#x6CD5;&#x662F;&#x53EF;&#x9009;&#x7684;&#x3002;</p>
<h4>new stream.Writable([options])<span><a class="mark" href="_api_stream.html#stream_constructor_new_stream_writable_options" id="stream_constructor_new_stream_writable_options">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_constructor_new_stream_writable_options" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/constructor_new_stream_writable_options.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v10.0.0</td>
<td><p>Add <code>emitClose</code> option to specify if <code>&apos;close&apos;</code> is emitted on destroy</p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>
<p><code>options</code> <a href="/s/_moz/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>highWaterMark</code> <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a> &#x5F53;&#x8C03;&#x7528; <a href="/s/doppiK"><code>stream.write()</code></a> &#x5F00;&#x59CB;&#x8FD4;&#x56DE; <code>false</code> &#x65F6;&#x7684;&#x7F13;&#x51B2;&#x5927;&#x5C0F;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>16384</code> (16kb), &#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#x9ED8;&#x8BA4;&#x4E3A; <code>16</code>&#x3002;</li>
<li><code>decodeStrings</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x662F;&#x5426;&#x628A;&#x4F20;&#x5165; <a href="/s/8MvCPB"><code>stream._write()</code></a> &#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7F16;&#x7801;&#x4E3A; <code>Buffer</code>&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x4E3A;&#x8C03;&#x7528; <a href="/s/doppiK"><code>stream.write()</code></a> &#x65F6;&#x6307;&#x5B9A;&#x7684;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>true</code>&#x3002;</li>
<li><code>defaultEncoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5F53; <a href="/s/doppiK"><code>stream.write()</code></a> &#x7684;&#x53C2;&#x6570;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x65F6;&#x9ED8;&#x8BA4;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>&apos;utf8&apos;</code>&#x3002;</li>
<li><code>objectMode</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x662F;&#x5426;&#x53EF;&#x4EE5;&#x8C03;&#x7528; <a href="/s/doppiK"><code>stream.write(anyObj)</code></a>&#x3002;
&#x4E00;&#x65E6;&#x8BBE;&#x4E3A; <code>true</code>&#xFF0C;&#x5219;&#x9664;&#x4E86;&#x5B57;&#x7B26;&#x4E32;&#x3001;<code>Buffer</code> &#x6216; <code>Uint8Array</code>&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5199;&#x5165;&#x6D41;&#x5B9E;&#x73B0;&#x652F;&#x6301;&#x7684;&#x5176;&#x4ED6; JavaScript &#x503C;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>emitClose</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x6D41;&#x88AB;&#x9500;&#x6BC1;&#x540E;&#x662F;&#x5426;&#x89E6;&#x53D1; <code>&apos;close&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>true</code>&#x3002;</li>
<li><code>write</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/8MvCPB"><code>stream._write()</code></a> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
<li><code>writev</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/7qpAhU"><code>stream._writev()</code></a> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
<li><code>destroy</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/7DTgUP"><code>stream._destroy()</code></a> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
<li><code>final</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/ehUmqz"><code>stream._final()</code></a> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);

class MyWritable extends Writable {
  constructor(options) {
    // &#x8C03;&#x7528; stream.Writable() &#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;
    super(options);
    // ...
  }
}
</code></pre>
<p>&#x4F7F;&#x7528; ES6 &#x4E4B;&#x524D;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);
const util = require(&apos;util&apos;);

function MyWritable(options) {
  if (!(this instanceof MyWritable))
    return new MyWritable(options);
  Writable.call(this, options);
}
util.inherits(MyWritable, Writable);
</code></pre>
<p>&#x4F7F;&#x7528;&#x7B80;&#x5316;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);

const myWritable = new Writable({
  write(chunk, encoding, callback) {
    // ...
  },
  writev(chunks, callback) {
    // ...
  }
});
</code></pre>
<h4>writable._write(chunk, encoding, callback)<span><a class="mark" href="_api_stream.html#stream_writable_write_chunk_encoding_callback_1" id="stream_writable_write_chunk_encoding_callback_1">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_write_chunk_encoding_callback_1" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_write_chunk_encoding_callback_1.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<ul>
<li><code>chunk</code> <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x8981;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x5757;&#x3002;
&#x4F1A;&#x4E00;&#x76F4;&#x662F; <code>buffer</code>&#xFF0C;&#x9664;&#x975E; <code>decodeStrings</code> &#x9009;&#x9879;&#x8BBE;&#x4E3A; <code>false</code> &#x6216;&#x8005;&#x6D41;&#x5904;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x3002;</li>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5982;&#x679C; <code>chunk</code> &#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5219;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;
&#x5982;&#x679C; <code>chunk</code> &#x662F; <code>Buffer</code> &#x6216;&#x8005;&#x6D41;&#x5904;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#xFF0C;&#x5219;&#x65E0;&#x89C6;&#x8BE5;&#x9009;&#x9879;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53;&#x6570;&#x636E;&#x5757;&#x88AB;&#x5904;&#x7406;&#x5B8C;&#x6210;&#x540E;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>&#x6240;&#x6709;&#x53EF;&#x5199;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x5FC5;&#x987B;&#x63D0;&#x4F9B; <a href="/s/8MvCPB"><code>writable._write()</code></a> &#x65B9;&#x6CD5;&#x5C06;&#x6570;&#x636E;&#x53D1;&#x9001;&#x5230;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#x3002;</p>
<p><a href="/s/fhVJQM"><code>Transform</code></a> &#x6D41;&#x4F1A;&#x63D0;&#x4F9B;&#x81EA;&#x8EAB;&#x5B9E;&#x73B0;&#x7684; <a href="/s/8MvCPB"><code>writable._write()</code></a>&#x3002;</p>
<p>&#x8BE5;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x88AB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;
&#x5B83;&#x5E94;&#x8BE5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x90E8;&#x7684; <code>Writable</code> &#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x65E0;&#x8BBA;&#x662F;&#x6210;&#x529F;&#x5B8C;&#x6210;&#x5199;&#x5165;&#x8FD8;&#x662F;&#x5199;&#x5165;&#x5931;&#x8D25;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x8C03;&#x7528; <code>callback</code>&#x3002;
&#x5982;&#x679C;&#x8C03;&#x7528;&#x5931;&#x8D25;&#xFF0C;&#x5219; <code>callback</code> &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x662F; <code>Error</code> &#x5BF9;&#x8C61;&#x3002;
&#x5982;&#x679C;&#x5199;&#x5165;&#x6210;&#x529F;&#xFF0C;&#x5219; <code>callback</code> &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A; <code>null</code>&#x3002;</p>
<p>&#x5728; <code>writable._write()</code> &#x88AB;&#x8C03;&#x7528;&#x4E4B;&#x540E;&#x4E14; <code>callback</code> &#x88AB;&#x8C03;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x6240;&#x6709;&#x5BF9; <code>writable.write()</code> &#x7684;&#x8C03;&#x7528;&#x90FD;&#x4F1A;&#x628A;&#x8981;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x8D77;&#x6765;&#x3002;
&#x5F53;&#x8C03;&#x7528; <code>callback</code> &#x65F6;&#xFF0C;&#x6D41;&#x5C06;&#x4F1A;&#x89E6;&#x53D1; <a href="/s/gFdjtJ"><code>&apos;drain&apos;</code></a>&#x4E8B;&#x4EF6;&#x3002;
&#x5982;&#x679C;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x9700;&#x8981;&#x540C;&#x65F6;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x5219;&#x5E94;&#x8BE5;&#x5B9E;&#x73B0; <code>writable._writev()</code> &#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5728;&#x6784;&#x9020;&#x51FD;&#x6570;&#x9009;&#x9879;&#x4E2D;&#x8BBE;&#x7F6E; <code>decodeStrings</code> &#x5C5E;&#x6027;&#x4E3A; <code>false</code>&#xFF0C;&#x5219; <code>chunk</code> &#x4F1A;&#x4FDD;&#x6301;&#x539F;&#x6837;&#x4F20;&#x5165; <code>.write()</code>&#xFF0C;&#x5B83;&#x53EF;&#x80FD;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x800C;&#x4E0D;&#x662F; <code>Buffer</code>&#x3002;
&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x5BF9;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x636E;&#x7F16;&#x7801;&#x7684;&#x652F;&#x6301;&#x3002;
&#x5F53; <code>decodeStrings</code> &#x4E3A; <code>false</code> &#x65F6;&#xFF0C;&#x5219; <code>encoding</code> &#x53C2;&#x6570;&#x6307;&#x5B9A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;
&#x5426;&#x5219;&#xFF0C;&#x5219; <code>encoding</code> &#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;
<code>writable._write()</code> &#x65B9;&#x6CD5;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x524D;&#x7F00;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x5728;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<h4>writable._writev(chunks, callback)<span><a class="mark" href="_api_stream.html#stream_writable_writev_chunks_callback" id="stream_writable_writev_chunks_callback">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_writev_chunks_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_writev_chunks_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<ul>
<li><code>chunks</code> <a href="/s/_moz/Reference/Global_Objects/Object" class="type">&lt;Object[]&gt;</a> &#x8981;&#x5199;&#x5165;&#x7684;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x3002;
&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x7684;&#x683C;&#x5F0F;&#x4E3A;<code>{ chunk: ..., encoding: ... }</code>&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53;&#x5168;&#x90E8;&#x6570;&#x636E;&#x5757;&#x88AB;&#x5904;&#x7406;&#x5B8C;&#x6210;&#x540E;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>&#x8BE5;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x88AB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;
&#x8BE5;&#x51FD;&#x6570;&#x5E94;&#x8BE5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x90E8;&#x7684; <code>Writable</code> &#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;</p>
<p><code>writable._writev()</code> &#x80FD;&#x591F;&#x540C;&#x65F6;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x3002;
&#x5982;&#x679C;&#x5B9E;&#x73B0;&#x4E86;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x65F6;&#x4F1A;&#x4F20;&#x5165;&#x5F53;&#x524D;&#x7F13;&#x51B2;&#x5728;&#x5199;&#x5165;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5757;&#x3002;</p>
<p><code>writable._writev()</code> &#x65B9;&#x6CD5;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x524D;&#x7F00;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x5728;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<h4>writable._destroy(err, callback)<span><a class="mark" href="_api_stream.html#stream_writable_destroy_err_callback" id="stream_writable_destroy_err_callback">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_destroy_err_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_destroy_err_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>err</code> <a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a> &#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p><code>_destroy()</code> &#x65B9;&#x6CD5;&#x4F1A;&#x88AB;&#xA0;<a href="/s/tLkQ7J"><code>writable.destroy()</code></a> &#x8C03;&#x7528;&#x3002;
&#x5B83;&#x53EF;&#x4EE5;&#x88AB;&#x5B50;&#x7C7B;&#x91CD;&#x5199;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<h4>writable._final(callback)<span><a class="mark" href="_api_stream.html#stream_writable_final_callback" id="stream_writable_final_callback">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_writable_final_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/writable_final_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53;&#x7ED3;&#x675F;&#x5199;&#x5165;&#x6240;&#x6709;&#x5269;&#x4F59;&#x6570;&#x636E;&#x65F6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p><code>_final()</code> &#x65B9;&#x6CD5;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;
&#x5B83;&#x5E94;&#x8BE5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x5185;&#x90E8;&#x7684; <code>Writable</code> &#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x5728;&#x6D41;&#x5173;&#x95ED;&#x4E4B;&#x524D;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x4E14;&#x5728; <code>callback</code> &#x88AB;&#x8C03;&#x7528;&#x540E;&#x89E6;&#x53D1; <code>&apos;finish&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5728;&#x6D41;&#x7ED3;&#x675F;&#x4E4B;&#x524D;&#x5173;&#x95ED;&#x8D44;&#x6E90;&#x6216;&#x5199;&#x5165;&#x7F13;&#x51B2;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h4>&#x5199;&#x5165;&#x65F6;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;<span><a class="mark" href="_api_stream.html#stream_errors_while_writing" id="stream_errors_while_writing">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_errors_while_writing" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/errors_while_writing.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x5F53; <code>writable._write()</code> &#x548C; <code>writable._writev()</code> &#x5728;&#x6267;&#x884C;&#x671F;&#x95F4;&#x53D1;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x5EFA;&#x8BAE;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5E76;&#x4F20;&#x5165;&#x9519;&#x8BEF;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;
&#x8FD9;&#x6837; <code>Writable</code> &#x5C31;&#x4F1A;&#x89E6;&#x53D1; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x4ECE; <code>writable._write()</code> &#x4E2D;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x9884;&#x671F;&#x7684;&#x7ED3;&#x679C;&#x3002;
&#x4F7F;&#x7528;&#x56DE;&#x8C03;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5BF9;&#x9519;&#x8BEF;&#x8FDB;&#x884C;&#x4E00;&#x81F4;&#x4E14;&#x53EF;&#x9884;&#x6D4B;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);

const myWritable = new Writable({
  write(chunk, encoding, callback) {
    if (chunk.toString().indexOf(&apos;a&apos;) &gt;= 0) {
      callback(new Error(&apos;&#x65E0;&#x6548;&#x7684;&#x6570;&#x636E;&#x5757;&apos;));
    } else {
      callback();
    }
  }
});
</code></pre>
<h4>&#x53EF;&#x5199;&#x6D41;&#x7684;&#x4F8B;&#x5B50;<span><a class="mark" href="_api_stream.html#stream_an_example_writable_stream" id="stream_an_example_writable_stream">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_an_example_writable_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/an_example_writable_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x53EF;&#x5199;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);

class MyWritable extends Writable {
  constructor(options) {
    super(options);
    // ...
  }

  _write(chunk, encoding, callback) {
    if (chunk.toString().indexOf(&apos;a&apos;) &gt;= 0) {
      callback(new Error(&apos;&#x65E0;&#x6548;&#x7684;&#x6570;&#x636E;&#x5757;&apos;));
    } else {
      callback();
    }
  }
}
</code></pre>
<h4>&#x5728;&#x53EF;&#x5199;&#x6D41;&#x4E2D;&#x89E3;&#x7801; buffer<span><a class="mark" href="_api_stream.html#stream_decoding_buffers_in_a_writable_stream" id="stream_decoding_buffers_in_a_writable_stream">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_decoding_buffers_in_a_writable_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/decoding_buffers_in_a_writable_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x89E3;&#x7801; buffer &#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x4F8B;&#x5982;&#x4F7F;&#x7528;&#x8F6C;&#x6362;&#x6D41;&#x5904;&#x7406;&#x5B57;&#x7B26;&#x4E32;&#x8F93;&#x5165;&#x3002;
&#x5F53;&#x4F7F;&#x7528;&#x591A;&#x5B57;&#x8282;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF08;&#x6BD4;&#x5982; UTF-8&#xFF09;&#x65F6;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x5904;&#x7406;&#x3002;
&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x5C55;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528; <code>StringDecoder</code> &#x548C; <a href="/s/9JUnJ8"><code>Writable</code></a> &#x89E3;&#x7801;&#x591A;&#x5B57;&#x8282;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<pre><code class="language-js">const { Writable } = require(&apos;stream&apos;);
const { StringDecoder } = require(&apos;string_decoder&apos;);

class StringWritable extends Writable {
  constructor(options) {
    super(options);
    this._decoder = new StringDecoder(options &amp;&amp; options.defaultEncoding);
    this.data = &apos;&apos;;
  }
  _write(chunk, encoding, callback) {
    if (encoding === &apos;buffer&apos;) {
      chunk = this._decoder.write(chunk);
    }
    this.data += chunk;
    callback();
  }
  _final(callback) {
    this.data += this._decoder.end();
    callback();
  }
}

const euro = [[0xE2, 0x82], [0xAC]].map(Buffer.from);
const w = new StringWritable();

w.write(&apos;&#x8D27;&#x5E01;: &apos;);
w.write(euro[0]);
w.end(euro[1]);

console.log(w.data); // &#x8D27;&#x5E01;: &#x20AC;
</code></pre>
<h3>&#x5B9E;&#x73B0;&#x53EF;&#x8BFB;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_implementing_a_readable_stream" id="stream_implementing_a_readable_stream">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_implementing_a_readable_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/implementing_a_readable_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p><code>stream.Readable</code> &#x7C7B;&#x53EF;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x53EF;&#x8BFB;&#x6D41;&#x3002; </p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#x5FC5;&#x987B;&#x8C03;&#x7528; <code>new stream.Readable([options])</code> &#x6784;&#x9020;&#x51FD;&#x6570;&#x5E76;&#x5B9E;&#x73B0; <code>readable._read()</code> &#x65B9;&#x6CD5;&#x3002;</p>
<h4>new stream.Readable([options])<span><a class="mark" href="_api_stream.html#stream_new_stream_readable_options" id="stream_new_stream_readable_options">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_new_stream_readable_options" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/new_stream_readable_options.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<ul>
<li>
<p><code>options</code> <a href="/s/_moz/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a></p>
<ul>
<li><code>highWaterMark</code> <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a> &#x4ECE;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5E76;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x7684;&#x6700;&#x5927;<a href="/s/K499k3">&#x5B57;&#x8282;&#x6570;</a>&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>16384</code> (16kb), &#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#x9ED8;&#x8BA4;&#x4E3A; <code>16</code>&#x3002;</li>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5982;&#x679C;&#x6307;&#x5B9A;&#x4E86;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x5C06; buffer &#x89E3;&#x7801;&#x6210;&#x5B57;&#x7B26;&#x4E32;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>null</code>&#x3002;</li>
<li><code>objectMode</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x6D41;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6D41;&#x3002;
&#x4E5F;&#x5C31;&#x662F;&#x8BF4; <a href="/s/SpgRaa"><code>stream.read(n)</code></a> &#x4F1A;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x800C;&#x4E0D;&#x662F; <code>Buffer</code>&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>read</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/5hv4Rd"><code>stream._read()</code></a> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
<li><code>destroy</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/2c9czW"><code>stream._destroy()</code></a> &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="language-js">const { Readable } = require(&apos;stream&apos;);

class MyReadable extends Readable {
  constructor(options) {
    // &#x8C03;&#x7528; stream.Readable(options) &#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;
    super(options);
    // ...
  }
}
</code></pre>
<p>&#x4F7F;&#x7528; ES6 &#x4E4B;&#x524D;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;</p>
<pre><code class="language-js">const { Readable } = require(&apos;stream&apos;);
const util = require(&apos;util&apos;);

function MyReadable(options) {
  if (!(this instanceof MyReadable))
    return new MyReadable(options);
  Readable.call(this, options);
}
util.inherits(MyReadable, Readable);
</code></pre>
<p>&#x4F7F;&#x7528;&#x7B80;&#x5316;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
<pre><code class="language-js">const { Readable } = require(&apos;stream&apos;);

const myReadable = new Readable({
  read(size) {
    // ...
  }
});
</code></pre>
<h4>readable._read(size)<span><a class="mark" href="_api_stream.html#stream_readable_read_size_1" id="stream_readable_read_size_1">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_read_size_1" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_read_size_1.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v10.0.0</td>
<td><p>call <code>_read()</code> only once per microtick</p></td></tr>
<tr><td>v0.9.4</td>
<td><p><span>&#x65B0;&#x589E;&#x4E8E;: v0.9.4</span></p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>size</code> <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a> &#x8981;&#x5F02;&#x6B65;&#x8BFB;&#x53D6;&#x7684;&#x5B57;&#x8282;&#x6570;&#x3002;</li>
</ul>
<p>&#x8BE5;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x88AB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;
&#x5B83;&#x5E94;&#x8BE5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x90E8;&#x7684; <code>Readable</code> &#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x6240;&#x6709;&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x5FC5;&#x987B;&#x63D0;&#x4F9B; <code>readable._read()</code> &#x65B9;&#x6CD5;&#x4ECE;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x3002;</p>
<p>&#x5F53; <code>readable._read()</code> &#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4ECE;&#x8D44;&#x6E90;&#x8BFB;&#x53D6;&#x5230;&#x6570;&#x636E;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5F00;&#x59CB;&#x4F7F;&#x7528; <a href="/s/8s3paZ"><code>this.push(dataChunk)</code></a> &#x63A8;&#x9001;&#x6570;&#x636E;&#x5230;&#x8BFB;&#x53D6;&#x961F;&#x5217;&#x3002;
<code>_read()</code> &#x5E94;&#x8BE5;&#x6301;&#x7EED;&#x4ECE;&#x8D44;&#x6E90;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5E76;&#x63A8;&#x9001;&#x6570;&#x636E;&#xFF0C;&#x76F4;&#x5230; <code>readable.push()</code> &#x8FD4;&#x56DE; <code>false</code>&#x3002;
&#x82E5;&#x60F3;&#x518D;&#x6B21;&#x8C03;&#x7528; <code>_read()</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x6062;&#x590D;&#x63A8;&#x9001;&#x6570;&#x636E;&#x5230;&#x961F;&#x5217;&#x3002;</p>
<p>&#x4E00;&#x65E6; <code>readable._read()</code> &#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5B83;&#x4E0D;&#x4F1A;&#x88AB;&#x518D;&#x6B21;&#x8C03;&#x7528;&#xFF0C;&#x9664;&#x975E;&#x8C03;&#x7528;&#x4E86; <a href="/s/8s3paZ"><code>readable.push()</code></a>&#x3002;
&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x786E;&#x4FDD; <code>readable._read()</code> &#x5728;&#x540C;&#x6B65;&#x6267;&#x884C;&#x65F6;&#x53EA;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x3002;</p>
<p><code>size</code> &#x662F;&#x53EF;&#x9009;&#x7684;&#x53C2;&#x6570;&#x3002;
&#x5BF9;&#x4E8E;&#x8BFB;&#x53D6;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x64CD;&#x4F5C;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>size</code> &#x53C2;&#x6570;&#x6765;&#x51B3;&#x5B9A;&#x8981;&#x8BFB;&#x53D6;&#x591A;&#x5C11;&#x6570;&#x636E;&#x3002;
&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x53EA;&#x8981;&#x6709;&#x6570;&#x636E;&#x5C31;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x3002;
&#x4E0D;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x6307;&#x5B9A; <code>size</code> &#x5B57;&#x8282;&#x7684;&#x6570;&#x636E;&#x5728;&#x8C03;&#x7528; <a href="/s/8s3paZ"><code>stream.push(chunk)</code></a>&#x3002;</p>
<p><code>readable._read()</code> &#x65B9;&#x6CD5;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x524D;&#x7F00;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x5728;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<h4>readable._destroy(err, callback)<span><a class="mark" href="_api_stream.html#stream_readable_destroy_err_callback" id="stream_readable_destroy_err_callback">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_destroy_err_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_destroy_err_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<span>&#x65B0;&#x589E;&#x4E8E;: v8.0.0</span>
</div>
<ul>
<li><code>err</code> <a href="/s/_moz/Reference/Global_Objects/Error" class="type">&lt;Error&gt;</a> &#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p><code>_destroy()</code> &#x65B9;&#x6CD5;&#x4F1A;&#x88AB;&#xA0;<a href="/s/6VkV74"><code>readable.destroy()</code></a> &#x8C03;&#x7528;&#x3002;
&#x5B83;&#x53EF;&#x4EE5;&#x88AB;&#x5B50;&#x7C7B;&#x91CD;&#x5199;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<h4>readable.push(chunk[, encoding])<span><a class="mark" href="_api_stream.html#stream_readable_push_chunk_encoding" id="stream_readable_push_chunk_encoding">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_push_chunk_encoding" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_push_chunk_encoding.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>chunk</code> argument can now be a <code>Uint8Array</code> instance.</p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li><code>chunk</code> <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> | <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="/s/_moz/Data_structures#Null_type" class="type">&lt;null&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x8981;&#x63A8;&#x5165;&#x8BFB;&#x53D6;&#x961F;&#x5217;&#x7684;&#x6570;&#x636E;&#x5757;&#x3002;
&#xA0;&#x5BF9;&#x4E8E;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;<code>chunk</code> &#x5FC5;&#x987B;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3001;<code>Buffer</code> &#x6216; <code>Uint8Array</code>&#x3002;
&#xA0;&#x5BF9;&#x4E8E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C;<code>chunk</code> &#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55; JavaScript &#x503C;&#x3002;</li>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5B57;&#x7B26;&#x4E32;&#x6570;&#x636E;&#x5757;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;
&#x5FC5;&#x987B;&#x662F;&#x6709;&#x6548;&#x7684; <code>Buffer</code> &#x5B57;&#x7B26;&#x7F16;&#x7801;&#xFF0C;&#x4F8B;&#x5982; <code>&apos;utf8&apos;</code> &#x6216;&#xA0;<code>&apos;ascii&apos;</code>&#x3002;</li>
<li>&#x8FD4;&#x56DE;: <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x5982;&#x679C;&#x8FD8;&#x6709;&#x6570;&#x636E;&#x5757;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x63A8;&#x5165;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; <code>true</code>&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE; <code>false</code>&#x3002;</li>
</ul>
<p>&#x5F53; <code>chunk</code> &#x662F; <code>Buffer</code>&#x3001;<code>Uint8Array</code> &#x6216;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;<code>chunk</code> &#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x5185;&#x90E8;&#x961F;&#x5217;&#x4E2D;&#x4F9B;&#x6D41;&#x6D88;&#x8D39;&#x3002;
&#x5728;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x53EF;&#x5199;&#x5165;&#x540E;&#xFF0C;&#x7ED9; <code>chunk</code> &#x4F20;&#x5165; <code>null</code> &#x8868;&#x793A;&#x6D41;&#x7684;&#x7ED3;&#x675F;&#xFF08;EOF&#xFF09;&#x3002;</p>
<p>&#x5F53;&#x53EF;&#x8BFB;&#x6D41;&#x5904;&#x5728;&#x6682;&#x505C;&#x6A21;&#x5F0F;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; <code>readable.push()</code> &#x6DFB;&#x52A0;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x5728;&#x89E6;&#x53D1; <a href="/s/J6CZGb"><code>&apos;readable&apos;</code></a> &#x4E8B;&#x4EF6;&#x65F6;&#x901A;&#x8FC7;&#x8C03;&#x7528; <a href="/s/SpgRaa"><code>readable.read()</code></a> &#x8BFB;&#x53D6;&#x3002;</p>
<p>&#x5F53;&#x53EF;&#x8BFB;&#x6D41;&#x5904;&#x4E8E;&#x6D41;&#x52A8;&#x6A21;&#x5F0F;&#x65F6;&#xFF0C;&#x4F7F;&#x7528; <code>readable.push()</code> &#x6DFB;&#x52A0;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x89E6;&#x53D1; <code>&apos;data&apos;</code> &#x4E8B;&#x4EF6;&#x8BFB;&#x53D6;&#x3002;</p>
<p><code>readable.push()</code> &#x65B9;&#x6CD5;&#x88AB;&#x8BBE;&#x8BA1;&#x5F97;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x7075;&#x6D3B;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x5C01;&#x88C5;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&apos;&#x6682;&#x505C;/&#x7EE7;&#x7EED;&apos;&#x673A;&#x5236;&#x4E0E;&#x6570;&#x636E;&#x56DE;&#x8C03;&#x7684;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x6E90;&#x65F6;&#xFF0C;&#x8BE5;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x6E90;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x53EF;&#x8BFB;&#x6D41;&#x5B9E;&#x4F8B;&#x5C01;&#x88C5;&#xFF1A;</p>
<pre><code class="language-js">// `source` &#x662F;&#x4E00;&#x4E2A;&#x6709; `readStop()` &#x548C; `readStart()` &#x65B9;&#x6CD5;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;
// &#x5F53;&#x6709;&#x6570;&#x636E;&#x65F6;&#x4F1A;&#x8C03;&#x7528; `ondata` &#x65B9;&#x6CD5;&#xFF0C;
// &#x5F53;&#x6570;&#x636E;&#x7ED3;&#x675F;&#x65F6;&#x4F1A;&#x8C03;&#x7528; `onend` &#x65B9;&#x6CD5;&#x3002;

class SourceWrapper extends Readable {
  constructor(options) {
    super(options);

    this._source = getLowlevelSourceObject();

    // &#x6BCF;&#x5F53;&#x6709;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5C06;&#x5176;&#x63A8;&#x5165;&#x5185;&#x90E8;&#x7F13;&#x51B2;&#x3002;
    this._source.ondata = (chunk) =&gt; {
      // &#x5982;&#x679C; push() &#x8FD4;&#x56DE; `false`&#xFF0C;&#x5219;&#x505C;&#x6B62;&#x8BFB;&#x53D6;&#x3002;
      if (!this.push(chunk))
        this._source.readStop();
    };

    // &#x5F53;&#x8BFB;&#x53D6;&#x5230;&#x5C3D;&#x5934;&#x65F6;&#xFF0C;&#x63A8;&#x5165; `null` &#x8868;&#x793A;&#x6D41;&#x7684;&#x7ED3;&#x675F;&#x3002;
    this._source.onend = () =&gt; {
      this.push(null);
    };
  }
  // &#x5F53;&#x6D41;&#x60F3;&#x63A8;&#x9001;&#x66F4;&#x591A;&#x6570;&#x636E;&#x65F6;&#xFF0C;`_read` &#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;
  _read(size) {
    this._source.readStart();
  }
}
</code></pre>
<p><code>readable.push()</code> &#x53EA;&#x80FD;&#x88AB;&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x8C03;&#x7528;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x5728; <code>readable._read()</code> &#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#xFF0C;&#x5982;&#x679C; <code>readable.push()</code> &#x7684; <code>chunk</code> &#x53C2;&#x6570;&#x4E3A; <code>undefined</code>&#xFF0C;&#x5219;&#x5B83;&#x4F1A;&#x88AB;&#x5F53;&#x6210;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x6216; buffer&#x3002;
&#x8BE6;&#x89C1; <a href="/s/yZyoMF"><code>readable.push(&apos;&apos;)</code></a>&#x3002;</p>
<h4>&#x8BFB;&#x53D6;&#x65F6;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;<span><a class="mark" href="_api_stream.html#stream_errors_while_reading" id="stream_errors_while_reading">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_errors_while_reading" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/errors_while_reading.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x5F53; <code>readable._read()</code> &#x5728;&#x6267;&#x884C;&#x671F;&#x95F4;&#x53D1;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x65F6;&#xFF0C;&#x5EFA;&#x8BAE;&#x89E6;&#x53D1; <code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x800C;&#x4E0D;&#x662F;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;
&#x4ECE; <code>readable._read()</code> &#x4E2D;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x9884;&#x671F;&#x7684;&#x7ED3;&#x679C;&#x3002;
&#x4F7F;&#x7528;<code>&apos;error&apos;</code> &#x4E8B;&#x4EF6;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5BF9;&#x9519;&#x8BEF;&#x8FDB;&#x884C;&#x4E00;&#x81F4;&#x4E14;&#x53EF;&#x9884;&#x6D4B;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<!-- eslint-disable no-useless-return -->
<pre><code class="language-js">const { Readable } = require(&apos;stream&apos;);

const myReadable = new Readable({
  read(size) {
    if (checkSomeErrorCondition()) {
      process.nextTick(() =&gt; this.emit(&apos;error&apos;, err));
      return;
    }
    // &#x5404;&#x79CD;&#x5904;&#x7406;&#x3002;
  }
});
</code></pre>
<h4>&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x4F8B;&#x5B50;<span><a class="mark" href="_api_stream.html#stream_an_example_counting_stream" id="stream_an_example_counting_stream">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_an_example_counting_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/an_example_counting_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<!--type=example-->
<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x7B80;&#x5355;&#x4F8B;&#x5B50;&#xFF0C;&#x4F9D;&#x6B21;&#x89E6;&#x53D1;&#x8BFB;&#x53D6; 1 &#x5230; 1,000,000&#xFF1A;</p>
<pre><code class="language-js">const { Readable } = require(&apos;stream&apos;);

class Counter extends Readable {
  constructor(opt) {
    super(opt);
    this._max = 1000000;
    this._index = 1;
  }

  _read() {
    const i = this._index++;
    if (i &gt; this._max)
      this.push(null);
    else {
      const str = String(i);
      const buf = Buffer.from(str, &apos;ascii&apos;);
      this.push(buf);
    }
  }
}
</code></pre>
<h3>&#x5B9E;&#x73B0;&#x53CC;&#x5DE5;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_implementing_a_duplex_stream" id="stream_implementing_a_duplex_stream">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_implementing_a_duplex_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/implementing_a_duplex_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p><a href="/s/2iRabr">&#x53CC;&#x5DE5;&#x6D41;</a>&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86;<a href="/s/YuDKX1">&#x53EF;&#x8BFB;&#x6D41;</a>&#x548C;<a href="/s/9JUnJ8">&#x53EF;&#x5199;&#x6D41;</a>&#xFF0C;&#x4F8B;&#x5982; TCP socket &#x8FDE;&#x63A5;&#x3002;
&#x56E0;&#x4E3A; JavaScript &#x4E0D;&#x652F;&#x6301;&#x591A;&#x91CD;&#x7EE7;&#x627F;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528; <code>stream.Duplex</code> &#x7C7B;&#x5B9E;&#x73B0;<a href="/s/2iRabr">&#x53CC;&#x5DE5;&#x6D41;</a>&#xFF08;&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528; <code>stream.Readable</code> &#x7C7B;&#x548C; <code>stream.Writable</code> &#x7C7B;&#xFF09;&#x3002;</p>
<p><code>stream.Duplex</code> &#x7C7B;&#x7684;&#x539F;&#x578B;&#x7EE7;&#x627F;&#x81EA; <code>stream.Readable</code> &#x548C;&#x5BC4;&#x751F;&#x81EA; <code>stream.Writable</code>&#xFF0C;&#x4F46;&#x662F; <code>instanceof</code> &#x5BF9;&#x8FD9;&#x4E24;&#x4E2A;&#x57FA;&#x7840;&#x7C7B;&#x90FD;&#x53EF;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x91CD;&#x5199;&#x4E86; <code>stream.Writable</code> &#x7684; <a href="/s/D1EDvM"><code>Symbol.hasInstance</code></a>&#x3002;</p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x53CC;&#x5DE5;&#x6D41;&#x5FC5;&#x987B;&#x8C03;&#x7528; <code>new stream.Duplex([options])</code> &#x6784;&#x9020;&#x51FD;&#x6570;&#x5E76;&#x5B9E;&#x73B0; <code>readable._read()</code> &#x548C; <code>writable._write()</code> &#x65B9;&#x6CD5;&#x3002;</p>
<h4>new stream.Duplex(options)<span><a class="mark" href="_api_stream.html#stream_new_stream_duplex_options" id="stream_new_stream_duplex_options">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_new_stream_duplex_options" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/new_stream_duplex_options.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<div class="api_metadata">
<details class="changelog"><summary>&#x7248;&#x672C;&#x5386;&#x53F2;</summary>
<table>
<tbody><tr><th>&#x7248;&#x672C;</th><th>&#x53D8;&#x66F4;</th></tr>
<tr><td>v8.4.0</td>
<td><p>The <code>readableHighWaterMark</code> and <code>writableHighWaterMark</code> options are supported now.</p></td></tr>
</tbody></table>
</details>
</div>
<ul>
<li>
<p><code>options</code> <a href="/s/_moz/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> &#x540C;&#x65F6;&#x4F20;&#x7ED9; <code>Writable</code> &#x548C; <code>Readable</code> &#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;
&#xA0;* <code>allowHalfOpen</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x5982;&#x679C;&#x8BBE;&#x4E3A; <code>false</code>&#xFF0C;&#x5219;&#x5F53;&#x53EF;&#x8BFB;&#x7AEF;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x53EF;&#x5199;&#x7AEF;&#x4E5F;&#x4F1A;&#x81EA;&#x52A8;&#x7ED3;&#x675F;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>true</code>&#x3002;</p>
<ul>
<li><code>readableObjectMode</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x8BBE;&#x7F6E;&#x6D41;&#x7684;&#x53EF;&#x8BFB;&#x7AEF;&#x4E3A; <code>objectMode</code>&#x3002;
&#x5982;&#x679C; <code>objectMode</code> &#x4E3A; <code>true</code>&#xFF0C;&#x5219;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>writableObjectMode</code> <a href="/s/_moz/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> &#x8BBE;&#x7F6E;&#x6D41;&#x7684;&#x53EF;&#x5199;&#x7AEF;&#x4E3A; <code>objectMode</code>&#x3002;
&#x5982;&#x679C; <code>objectMode</code> &#x4E3A; <code>true</code>&#xFF0C;&#x5219;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;
&#x9ED8;&#x8BA4;&#x4E3A; <code>false</code>&#x3002;</li>
<li><code>readableHighWaterMark</code> <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a> &#x8BBE;&#x7F6E;&#x6D41;&#x7684;&#x53EF;&#x8BFB;&#x7AEF;&#x7684; <code>highWaterMark</code>&#x3002;
&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x8BBE;&#x7F6E;&#x4E86; <code>highWaterMark</code>&#xFF0C;&#x5219;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;</li>
<li><code>writableHighWaterMark</code> <a href="/s/_moz/Data_structures#Number_type" class="type">&lt;number&gt;</a> &#x8BBE;&#x7F6E;&#x6D41;&#x7684;&#x53EF;&#x5199;&#x7AEF;&#x7684; <code>highWaterMark</code>&#x3002;
&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x8BBE;&#x7F6E;&#x4E86; <code>highWaterMark</code>&#xFF0C;&#x5219;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x3002;
</li>
</ul>
</li>
</ul>
<p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="language-js">const { Duplex } = require(&apos;stream&apos;);

class MyDuplex extends Duplex {
  constructor(options) {
    super(options);
    // ...
  }
}
</code></pre>
<p>&#x4F7F;&#x7528; ES6 &#x4E4B;&#x524D;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;</p>
<pre><code class="language-js">const { Duplex } = require(&apos;stream&apos;);
const util = require(&apos;util&apos;);

function MyDuplex(options) {
  if (!(this instanceof MyDuplex))
    return new MyDuplex(options);
  Duplex.call(this, options);
}
util.inherits(MyDuplex, Duplex);
</code></pre>
<p>&#x4F7F;&#x7528;&#x7B80;&#x5316;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
<pre><code class="language-js">const { Duplex } = require(&apos;stream&apos;);

const myDuplex = new Duplex({
  read(size) {
    // ...
  },
  write(chunk, encoding, callback) {
    // ...
  }
});
</code></pre>
<h4>&#x53CC;&#x5DE5;&#x6D41;&#x7684;&#x4F8B;&#x5B50;<span><a class="mark" href="_api_stream.html#stream_an_example_duplex_stream" id="stream_an_example_duplex_stream">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_an_example_duplex_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/an_example_duplex_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x53CC;&#x5DE5;&#x6D41;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5C01;&#x88C5;&#x4E86;&#x4E00;&#x4E2A;&#x53EF;&#x8BFB;&#x53EF;&#x5199;&#x7684;&#x5E95;&#x5C42;&#x8D44;&#x6E90;&#x5BF9;&#x8C61;&#x3002;</p>
<pre><code class="language-js">const { Duplex } = require(&apos;stream&apos;);
const kSource = Symbol(&apos;source&apos;);

class MyDuplex extends Duplex {
  constructor(source, options) {
    super(options);
    this[kSource] = source;
  }

  _write(chunk, encoding, callback) {
    // &#x5E95;&#x5C42;&#x8D44;&#x6E90;&#x53EA;&#x5904;&#x7406;&#x5B57;&#x7B26;&#x4E32;&#x3002;
    if (Buffer.isBuffer(chunk))
      chunk = chunk.toString();
    this[kSource].writeSomeData(chunk);
    callback();
  }

  _read(size) {
    this[kSource].fetchSomeData(size, (data, encoding) =&gt; {
      this.push(Buffer.from(data, encoding));
    });
  }
}
</code></pre>
<p>&#x53CC;&#x5DE5;&#x6D41;&#x6700;&#x91CD;&#x8981;&#x7684;&#x65B9;&#x9762;&#x662F;&#xFF0C;&#x53EF;&#x8BFB;&#x7AEF;&#x548C;&#x53EF;&#x5199;&#x7AEF;&#x76F8;&#x4E92;&#x72EC;&#x7ACB;&#x4E8E;&#x5F7C;&#x6B64;&#x5730;&#x5171;&#x5B58;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x4E2D;&#x3002;</p>
<h4>&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x53CC;&#x5DE5;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_object_mode_duplex_streams" id="stream_object_mode_duplex_streams">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_object_mode_duplex_streams" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/object_mode_duplex_streams.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x5BF9;&#x53CC;&#x5DE5;&#x6D41;&#x6765;&#x8BF4;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>readableObjectMode</code> &#x548C;&#xA0;<code>writableObjectMode</code> &#x9009;&#x9879;&#x6765;&#x5206;&#x522B;&#x8BBE;&#x7F6E;&#x53EF;&#x8BFB;&#x7AEF;&#x548C;&#x53EF;&#x5199;&#x7AEF;&#x7684; <code>objectMode</code>&#x3002;</p>
<p>&#x5728;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x53D8;&#x6362;&#x6D41;&#xFF08;&#x53CC;&#x5DE5;&#x6D41;&#x7684;&#x4E00;&#x79CD;&#xFF09;&#xFF0C;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x53EF;&#x5199;&#x7AEF;&#x63A5;&#x6536; JavaScript &#x6570;&#x503C;&#xFF0C;&#x5E76;&#x5728;&#x53EF;&#x8BFB;&#x7AEF;&#x8F6C;&#x6362;&#x4E3A;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<pre><code class="language-js">const { Transform } = require(&apos;stream&apos;);

// &#x8F6C;&#x6362;&#x6D41;&#x4E5F;&#x662F;&#x53CC;&#x5DE5;&#x6D41;&#x3002;
const myTransform = new Transform({
  writableObjectMode: true,

  transform(chunk, encoding, callback) {
    // &#x5F3A;&#x5236;&#x628A; chunk &#x8F6C;&#x6362;&#x6210;&#x6570;&#x503C;&#x3002;
    chunk |= 0;

    // &#x5C06; chunk &#x8F6C;&#x6362;&#x6210;&#x5341;&#x516D;&#x8FDB;&#x5236;&#x3002;
    const data = chunk.toString(16);

    // &#x63A8;&#x9001;&#x6570;&#x636E;&#x5230;&#x53EF;&#x8BFB;&#x961F;&#x5217;&#x3002;
    callback(null, &apos;0&apos;.repeat(data.length % 2) + data);
  }
});

myTransform.setEncoding(&apos;ascii&apos;);
myTransform.on(&apos;data&apos;, (chunk) =&gt; console.log(chunk));

myTransform.write(1);
// &#x6253;&#x5370;: 01
myTransform.write(10);
// &#x6253;&#x5370;: 0a
myTransform.write(100);
// &#x6253;&#x5370;: 64
</code></pre>
<h3>&#x5B9E;&#x73B0;&#x8F6C;&#x6362;&#x6D41;<span><a class="mark" href="_api_stream.html#stream_implementing_a_transform_stream" id="stream_implementing_a_transform_stream">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_implementing_a_transform_stream" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/implementing_a_transform_stream.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p><a href="/s/fhVJQM">&#x8F6C;&#x6362;&#x6D41;</a>&#x662F;&#x4E00;&#x79CD;<a href="/s/2iRabr">&#x53CC;&#x5DE5;&#x6D41;</a>&#xFF0C;&#x5B83;&#x4F1A;&#x5BF9;&#x8F93;&#x5165;&#x505A;&#x4E9B;&#x8BA1;&#x7B97;&#x7136;&#x540E;&#x8F93;&#x51FA;&#x3002;
&#x4F8B;&#x5982; <a href="/s/duYbh2">zlib</a> &#x6D41;&#x548C; <a href="/s/FuEfsg">crypto</a> &#x6D41;&#x4F1A;&#x538B;&#x7F29;&#x3001;&#x52A0;&#x5BC6;&#x6216;&#x89E3;&#x5BC6;&#x6570;&#x636E;&#x3002;</p>
<p>&#x8F93;&#x51FA;&#x6D41;&#x7684;&#x5927;&#x5C0F;&#x3001;&#x6570;&#x636E;&#x5757;&#x7684;&#x6570;&#x91CF;&#x90FD;&#x4E0D;&#x4E00;&#x5B9A;&#x4F1A;&#x548C;&#x8F93;&#x5165;&#x6D41;&#x7684;&#x4E00;&#x81F4;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;<code>Hash</code> &#x6D41;&#x5728;&#x8F93;&#x5165;&#x7ED3;&#x675F;&#x65F6;&#x53EA;&#x4F1A;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x800C; <code>zlib</code> &#x6D41;&#x7684;&#x8F93;&#x51FA;&#x53EF;&#x80FD;&#x6BD4;&#x8F93;&#x5165;&#x5927;&#x5F88;&#x591A;&#x6216;&#x5C0F;&#x5F88;&#x591A;&#x3002;
<code>stream.Transform</code> &#x7C7B;&#x53EF;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;<a href="/s/fhVJQM">&#x8F6C;&#x6362;&#x6D41;</a>&#x3002;</p>
<p><code>stream.Transform</code> &#x7C7B;&#x7EE7;&#x627F;&#x81EA; <code>stream.Duplex</code>&#xFF0C;&#x5E76;&#x4E14;&#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x6709;&#x7684; <code>writable._write()</code> &#x548C; <code>readable._read()</code> &#x65B9;&#x6CD5;&#x3002;
&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8F6C;&#x6362;&#x6D41;&#x5FC5;&#x987B;&#x5B9E;&#x73B0; <a href="/s/N8nFbP"><code>transform._transform()</code></a> &#x65B9;&#x6CD5;&#xFF0C;<a href="/s/mErApk"><code>transform._flush()</code></a> &#x65B9;&#x6CD5;&#x662F;&#x53EF;&#x9009;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x4F7F;&#x7528;&#x8F6C;&#x6362;&#x6D41;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x8BFB;&#x7AEF;&#x7684;&#x8F93;&#x51FA;&#x6CA1;&#x6709;&#x88AB;&#x6D88;&#x8D39;&#xFF0C;&#x5219;&#x5199;&#x5165;&#x6D41;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x53EF;&#x5199;&#x7AEF;&#x88AB;&#x6682;&#x505C;&#x3002;</p>
<h4>new stream.Transform([options])<span><a class="mark" href="_api_stream.html#stream_new_stream_transform_options" id="stream_new_stream_transform_options">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_new_stream_transform_options" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/new_stream_transform_options.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<ul>
<li>
<p><code>options</code> <a href="/s/_moz/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> &#x540C;&#x65F6;&#x4F20;&#x7ED9; <code>Writable</code> &#x548C; <code>Readable</code> &#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;</p>
<ul>
<li><code>transform</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/N8nFbP"><code>stream._transform()</code></a> &#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
<li><code>flush</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5BF9; <a href="/s/mErApk"><code>stream._flush()</code></a> &#x7684;&#x5B9E;&#x73B0;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="language-js">const { Transform } = require(&apos;stream&apos;);

class MyTransform extends Transform {
  constructor(options) {
    super(options);
    // ...
  }
}
</code></pre>
<p>&#x4F7F;&#x7528; ES6 &#x4E4B;&#x524D;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;</p>
<pre><code class="language-js">const { Transform } = require(&apos;stream&apos;);
const util = require(&apos;util&apos;);

function MyTransform(options) {
  if (!(this instanceof MyTransform))
    return new MyTransform(options);
  Transform.call(this, options);
}
util.inherits(MyTransform, Transform);
</code></pre>
<p>&#x4F7F;&#x7528;&#x7B80;&#x5316;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
<pre><code class="language-js">const { Transform } = require(&apos;stream&apos;);

const myTransform = new Transform({
  transform(chunk, encoding, callback) {
    // ...
  }
});
</code></pre>
<h4>&apos;finish&apos; &#x4E0E; &apos;end&apos; &#x4E8B;&#x4EF6;<span><a class="mark" href="_api_stream.html#stream_events_finish_and_end" id="stream_events_finish_and_end">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_events_finish_and_end" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/events_finish_and_end.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p><a href="/s/VBJRc8"><code>&apos;finish&apos;</code></a> &#x4E8B;&#x4EF6;&#x6765;&#x81EA; <code>stream.Writable</code> &#x7C7B;&#xFF0C;<a href="/s/ZgviqU"><code>&apos;end&apos;</code></a> &#x4E8B;&#x4EF6;&#x6765;&#x81EA; <code>stream.Readable</code> &#x7C7B;&#x3002;
&#x5F53;&#x8C03;&#x7528;&#x4E86; <a href="/s/nvArK4"><code>stream.end()</code></a> &#x5E76;&#x4E14; <a href="/s/N8nFbP"><code>stream._transform()</code></a> &#x5904;&#x7406;&#x5B8C;&#x5168;&#x90E8;&#x6570;&#x636E;&#x5757;&#x4E4B;&#x540E;&#xFF0C;&#x89E6;&#x53D1; <code>&apos;finish&apos;</code> &#x4E8B;&#x4EF6;&#x3002;
&#x5F53;&#x8C03;&#x7528;&#x4E86; <a href="/s/mErApk"><code>transform._flush()</code></a> &#x4E2D;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5E76;&#x4E14;&#x6240;&#x6709;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x8F93;&#x51FA;&#x4E4B;&#x540E;&#xFF0C;&#x89E6;&#x53D1; <code>&apos;end&apos;</code> &#x4E8B;&#x4EF6;&#x3002;</p>
<h4>transform._flush(callback)<span><a class="mark" href="_api_stream.html#stream_transform_flush_callback" id="stream_transform_flush_callback">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_transform_flush_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/transform_flush_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<ul>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53;&#x5269;&#x4F59;&#x7684;&#x6570;&#x636E;&#x88AB; flush &#x540E;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>&#x8BE5;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x88AB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;
&#x5B83;&#x5E94;&#x8BE5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x90E8;&#x7684; <code>Readable</code> &#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8F6C;&#x6362;&#x64CD;&#x4F5C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5728;&#x6D41;&#x7684;&#x672B;&#x5C3E;&#x53D1;&#x9001;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x3002;
&#x4F8B;&#x5982;&#xFF0C;<code>zlib</code> &#x538B;&#x7F29;&#x6D41;&#x65F6;&#x4F1A;&#x50A8;&#x5B58;&#x4E00;&#x4E9B;&#x7528;&#x4E8E;&#x4F18;&#x5316;&#x8F93;&#x51FA;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x3002;
&#x5F53;&#x6D41;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x9700;&#x8981;&#x88AB; flush &#x624D;&#x7B97;&#x5B8C;&#x6210;&#x538B;&#x7F29;&#x3002;</p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7684;<a href="/s/fhVJQM">&#x8F6C;&#x6362;&#x6D41;</a>&#x7684; <code>transform._flush()</code> &#x65B9;&#x6CD5;&#x662F;&#x53EF;&#x9009;&#x7684;&#x3002;
&#x5F53;&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x6570;&#x636E;&#x8981;&#x88AB;&#x6D88;&#x8D39;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x662F;&#x5728; <a href="/s/ZgviqU"><code>&apos;end&apos;</code></a> &#x4E8B;&#x4EF6;&#x88AB;&#x89E6;&#x53D1;&#x4E4B;&#x524D;&#x8C03;&#x7528;&#x5219;&#x4F1A;&#x53D1;&#x51FA;&#x53EF;&#x8BFB;&#x6D41;&#x7ED3;&#x675F;&#x7684;&#x4FE1;&#x53F7;&#x3002;</p>
<p>&#x5728; <code>transform._flush()</code> &#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;<code>readable.push()</code> &#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x96F6;&#x6B21;&#x6216;&#x591A;&#x6B21;&#x3002;
&#x5F53; flush &#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x8C03;&#x7528; <code>callback</code> &#x51FD;&#x6570;&#x3002;</p>
<p><code>transform._flush()</code> &#x65B9;&#x6CD5;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x524D;&#x7F00;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x5728;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<h4>transform._transform(chunk, encoding, callback)<span><a class="mark" href="_api_stream.html#stream_transform_transform_chunk_encoding_callback" id="stream_transform_transform_chunk_encoding_callback">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_transform_transform_chunk_encoding_callback" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/transform_transform_chunk_encoding_callback.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<ul>
<li><code>chunk</code> <a href="_api_buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> | <a href="/s/_moz/Data_structures#Data_types" class="type">&lt;any&gt;</a> &#x8981;&#x8F6C;&#x6362;&#x7684;&#x6570;&#x636E;&#x5757;&#x3002;
 <code>chunk</code> &#x603B;&#x4F1A;&#x662F;&#x4E00;&#x4E2A; buffer&#xFF0C;&#x9664;&#x975E; <code>decodeStrings</code> &#x9009;&#x9879;&#x8BBE;&#x4E3A; <code>false</code> &#x6216;&#x8005;&#x6D41;&#x5904;&#x5728;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x3002;</li>
<li><code>encoding</code> <a href="/s/_moz/Data_structures#String_type" class="type">&lt;string&gt;</a> &#x5982;&#x679C;&#xA0;<code>chunk</code>&#xA0;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5219; <code>encoding</code> &#x662F;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x3002;
&#x5982;&#x679C; <code>chunk</code> &#x662F; buffer&#xFF0C;&#x5219; <code>encoding</code> &#x7684;&#x503C;&#x4E3A; &apos;buffer&apos;&#x3002;</li>
<li><code>callback</code> <a href="/s/_moz/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> &#x5F53; <code>chunk</code> &#x5904;&#x7406;&#x5B8C;&#x6210;&#x65F6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ul>
<p>&#x8BE5;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x88AB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;
&#x5B83;&#x5E94;&#x8BE5;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x4E14;&#x53EA;&#x80FD;&#x88AB;&#x5185;&#x90E8;&#x7684; <code>Readable</code> &#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x6240;&#x6709;&#x8F6C;&#x6362;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x90FD;&#x5FC5;&#x987B;&#x63D0;&#x4F9B; <code>_transform()</code> &#x65B9;&#x6CD5;&#x6765;&#x63A5;&#x6536;&#x8F93;&#x5165;&#x5E76;&#x751F;&#x4EA7;&#x8F93;&#x51FA;&#x3002;
<code>transform._transform()</code> &#x7684;&#x5B9E;&#x73B0;&#x4F1A;&#x5904;&#x7406;&#x5199;&#x5165;&#x7684;&#x5B57;&#x8282;&#xFF0C;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x8BA1;&#x7B97;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528; <code>readable.push()</code> &#x8F93;&#x51FA;&#x5230;&#x53EF;&#x8BFB;&#x6D41;&#x3002;</p>
<p><code>transform.push()</code> &#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x96F6;&#x6B21;&#x6216;&#x591A;&#x6B21;&#x7528;&#x6765;&#x4ECE;&#x6BCF;&#x6B21;&#x8F93;&#x5165;&#x7684;&#x6570;&#x636E;&#x5757;&#x4EA7;&#x751F;&#x8F93;&#x51FA;&#xFF0C;&#x8C03;&#x7528;&#x7684;&#x6B21;&#x6570;&#x53D6;&#x51B3;&#x9700;&#x8981;&#x591A;&#x5C11;&#x6570;&#x636E;&#x6765;&#x4EA7;&#x751F;&#x8F93;&#x51FA;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x8F93;&#x5165;&#x7684;&#x6570;&#x636E;&#x5757;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x4EFB;&#x4F55;&#x8F93;&#x51FA;&#x3002;</p>
<p>&#x5F53;&#x524D;&#x6570;&#x636E;&#x88AB;&#x5B8C;&#x5168;&#x6D88;&#x8D39;&#x4E4B;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x8C03;&#x7528; <code>callback</code> &#x51FD;&#x6570;&#x3002;
&#x5F53;&#x5904;&#x7406;&#x8F93;&#x5165;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x751F;&#x51FA;&#x9519;&#x65F6;&#xFF0C;<code>callback</code> &#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x5165; <code>Error</code> &#x5BF9;&#x8C61;&#xFF0C;&#x5426;&#x5219;&#x4F20;&#x5165; <code>null</code>&#x3002;
&#x5982;&#x679C; <code>callback</code> &#x4F20;&#x5165;&#x4E86;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5219;&#x5B83;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230; <code>readable.push()</code>&#x3002;
&#x5C31;&#x50CF;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre><code class="language-js">transform.prototype._transform = function(data, encoding, callback) {
  this.push(data);
  callback();
};

transform.prototype._transform = function(data, encoding, callback) {
  callback(null, data);
};
</code></pre>
<p><code>transform._transform()</code> &#x65B9;&#x6CD5;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x524D;&#x7F00;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x5728;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x88AB;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x3002;</p>
<p><code>transform._transform()</code>&#xA0;&#x4E0D;&#x80FD;&#x5E76;&#x884C;&#x8C03;&#x7528;&#x3002;
&#x6D41;&#x4F7F;&#x7528;&#x4E86;&#x961F;&#x5217;&#x673A;&#x5236;&#xFF0C;&#x65E0;&#x8BBA;&#x540C;&#x6B65;&#x6216;&#x5F02;&#x6B65;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x5148;&#x8C03;&#x7528; <code>callback</code> &#x4E4B;&#x540E;&#x624D;&#x80FD;&#x63A5;&#x6536;&#x4E0B;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x3002;</p>
<h4>stream.PassThrough &#x7C7B;<span><a class="mark" href="_api_stream.html#stream_class_stream_passthrough" id="stream_class_stream_passthrough">#</a></span></h4><p class="tip_wrap"><a href="_api_en_stream.html#stream_class_stream_passthrough" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/class_stream_passthrough.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p><code>stream.PassThrough</code> &#x7C7B;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x5173;&#x7D27;&#x8981;&#x7684;<a href="/s/fhVJQM">&#x8F6C;&#x6362;&#x6D41;</a>&#xFF0C;&#x53EA;&#x662F;&#x5355;&#x7EAF;&#x5730;&#x628A;&#x8F93;&#x5165;&#x7684;&#x5B57;&#x8282;&#x539F;&#x5C01;&#x4E0D;&#x52A8;&#x5730;&#x8F93;&#x51FA;&#x3002;
&#x5B83;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x793A;&#x4F8B;&#x6216;&#x6D4B;&#x8BD5;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x4E5F;&#x4F1A;&#x7528;&#x4E8E;&#x67D0;&#x4E9B;&#x65B0;&#x9896;&#x7684;&#x6D41;&#x7684;&#x57FA;&#x672C;&#x7EC4;&#x6210;&#x90E8;&#x5206;&#x3002;</p>
<h2>&#x5176;&#x4ED6;&#x6CE8;&#x610F;&#x4E8B;&#x9879;<span><a class="mark" href="_api_stream.html#stream_additional_notes" id="stream_additional_notes">#</a></span></h2>
<!--type=misc-->
<h3>&#x517C;&#x5BB9;&#x65E7;&#x7248;&#x672C;&#x7684; Node.js<span><a class="mark" href="_api_stream.html#stream_compatibility_with_older_node_js_versions" id="stream_compatibility_with_older_node_js_versions">#</a></span></h3><p class="tip_wrap"><span class="tip_depre">&#x672C;&#x6BB5;&#x843D;&#x6682;&#x4E0D;&#x63D0;&#x4F9B;&#x7FFB;&#x8BD1;</span></p>
<!--type=misc-->
<p>Prior to Node.js 0.10, the <code>Readable</code> stream interface was simpler, but also
less powerful and less useful.</p>
<ul>
<li>Rather than waiting for calls to the <a href="/s/SpgRaa"><code>stream.read()</code></a> method,
<a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> events would begin emitting immediately. Applications that
would need to perform some amount of work to decide how to handle data
were required to store read data into buffers so the data would not be lost.</li>
<li>The <a href="/s/jqytVw"><code>stream.pause()</code></a> method was advisory, rather than
guaranteed. This meant that it was still necessary to be prepared to receive
<a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> events <em>even when the stream was in a paused state</em>.</li>
</ul>
<p>In Node.js 0.10, the <a href="/s/YuDKX1"><code>Readable</code></a> class was added. For backwards
compatibility with older Node.js programs, <code>Readable</code> streams switch into
&quot;flowing mode&quot; when a <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> event handler is added, or when the
<a href="/s/Zhf28N"><code>stream.resume()</code></a> method is called. The effect is that, even
when not using the new <a href="/s/SpgRaa"><code>stream.read()</code></a> method and
<a href="/s/J6CZGb"><code>&apos;readable&apos;</code></a> event, it is no longer necessary to worry about losing
<a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> chunks.</p>
<p>While most applications will continue to function normally, this introduces an
edge case in the following conditions:</p>
<ul>
<li>No <a href="/s/8CCPjN"><code>&apos;data&apos;</code></a> event listener is added.</li>
<li>The <a href="/s/Zhf28N"><code>stream.resume()</code></a> method is never called.</li>
<li>The stream is not piped to any writable destination.</li>
</ul>
<p>For example, consider the following code:</p>
<pre><code class="language-js">// WARNING!  BROKEN!
net.createServer((socket) =&gt; {

  // we add an &apos;end&apos; listener, but never consume the data
  socket.on(&apos;end&apos;, () =&gt; {
    // It will never get here.
    socket.end(&apos;The message was received but was not processed.\n&apos;);
  });

}).listen(1337);
</code></pre>
<p>Prior to Node.js 0.10, the incoming message data would be simply discarded.
However, in Node.js 0.10 and beyond, the socket remains paused forever.</p>
<p>The workaround in this situation is to call the
<a href="/s/Zhf28N"><code>stream.resume()</code></a> method to begin the flow of data:</p>
<pre><code class="language-js">// Workaround
net.createServer((socket) =&gt; {
  socket.on(&apos;end&apos;, () =&gt; {
    socket.end(&apos;The message was received but was not processed.\n&apos;);
  });

  // start the flow of data, discarding it.
  socket.resume();
}).listen(1337);
</code></pre>
<p>In addition to new <code>Readable</code> streams switching into flowing mode,
pre-0.10 style streams can be wrapped in a <code>Readable</code> class using the
<a href="/s/8NH3ye"><code>readable.wrap()</code></a> method.</p>
<h3>readable.read(0)<span><a class="mark" href="_api_stream.html#stream_readable_read_0" id="stream_readable_read_0">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_read_0" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_read_0.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9700;&#x8981;&#x89E6;&#x53D1;&#x5E95;&#x5C42;&#x53EF;&#x8BFB;&#x6D41;&#x7684;&#x5237;&#x65B0;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x5E76;&#x4E0D;&#x6D88;&#x8D39;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x3002;
&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x7528; <code>readable.read(0)</code>&#xFF0C;&#x8FD4;&#x56DE; <code>null</code>&#x3002;</p>
<p>&#x5982;&#x679C;&#x5185;&#x90E8;&#x8BFB;&#x53D6;&#x7F13;&#x51B2;&#x5C0F;&#x4E8E; <code>highWaterMark</code>&#xFF0C;&#x4E14;&#x6D41;&#x8FD8;&#x672A;&#x88AB;&#x8BFB;&#x53D6;&#xFF0C;&#x5219;&#x8C03;&#x7528; <code>stream.read(0)</code> &#x4F1A;&#x89E6;&#x53D1;&#x8C03;&#x7528;&#x5E95;&#x5C42;&#x7684; <a href="/s/5hv4Rd"><code>stream._read()</code></a>&#x3002;</p>
<p>&#x867D;&#x7136;&#x5927;&#x591A;&#x6570;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x51E0;&#x4E4E;&#x4E0D;&#x9700;&#x8981;&#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x4F46; Node.js &#x4E2D;&#x4F1A;&#x51FA;&#x73B0;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x53EF;&#x8BFB;&#x6D41;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#x3002;</p>
<h3>readable.push(&apos;&apos;)<span><a class="mark" href="_api_stream.html#stream_readable_push" id="stream_readable_push">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_readable_push" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/readable_push.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x4E0D;&#x63A8;&#x8350;&#x4F7F;&#x7528; <code>readable.push(&apos;&apos;)</code>&#x3002;</p>
<p>&#x5411;&#x4E00;&#x4E2A;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x7684;&#x6D41;&#x63A8;&#x5165;&#x4E00;&#x4E2A;&#x96F6;&#x5B57;&#x8282;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3001;<code>Buffer</code> &#x6216; <code>Uint8Array</code> &#x4F1A;&#x4EA7;&#x751F;&#x526F;&#x4F5C;&#x7528;&#x3002;
&#x56E0;&#x4E3A;&#x8C03;&#x7528;&#x4E86; <a href="/s/8s3paZ"><code>readable.push()</code></a>&#xFF0C;&#x8BE5;&#x8C03;&#x7528;&#x4F1A;&#x7ED3;&#x675F;&#x8BFB;&#x53D6;&#x8FDB;&#x7A0B;&#x3002;
&#x7136;&#x800C;&#xFF0C;&#x56E0;&#x4E3A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x53EF;&#x8BFB;&#x7F13;&#x51B2;, &#x6240;&#x4EE5;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x53EF;&#x4F9B;&#x7528;&#x6237;&#x6D88;&#x8D39;&#x3002;</p>
<h3>&#x8C03;&#x7528; `readable.setEncoding()` &#x4E4B;&#x540E; `highWaterMark` &#x7684;&#x5DEE;&#x5F02;<span><a class="mark" href="_api_stream.html#stream_highwatermark_discrepancy_after_calling_readable_setencoding" id="stream_highwatermark_discrepancy_after_calling_readable_setencoding">#</a></span></h3><p class="tip_wrap"><a href="_api_en_stream.html#stream_highwatermark_discrepancy_after_calling_readable_setencoding" class="tip_en">&#x67E5;&#x770B;&#x82F1;&#x6587;&#x7248;</a><a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/stream/highwatermark_discrepancy_after_calling_readable_setencoding.md" class="tip_trans">&#x53C2;&#x4E0E;&#x7FFB;&#x8BD1;</a></p>
<p>&#x4F7F;&#x7528; <code>readable.setEncoding()</code> &#x4F1A;&#x6539;&#x53D8; <code>highWaterMark</code> &#x5C5E;&#x6027;&#x5728;&#x975E;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x800C;&#x8A00;&#xFF0C;&#x5F53;&#x524D;&#x7F13;&#x51B2;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x4EE5;&#x5B57;&#x8282;&#x4E3A;&#x5355;&#x4F4D;&#x8DDF; <code>highWaterMark</code> &#x6BD4;&#x8F83;&#x7684;&#x3002;
&#x4F46;&#x662F;&#x8C03;&#x7528; <code>setEncoding()</code> &#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x5F00;&#x59CB;&#x4EE5;&#x5B57;&#x7B26;&#x4E3A;&#x5355;&#x4F4D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;</p>
<p>&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528; <code>latin1</code> &#x6216; <code>ascii</code> &#x65F6;&#x662F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;
&#x4F46;&#x5728;&#x5904;&#x7406;&#x542B;&#x6709;&#x591A;&#x5B57;&#x8282;&#x5B57;&#x7B26;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5C0F;&#x5FC3;&#x3002;</p>
        </div>
      </div>
    </div>
  </div>
  <!-- 搜索弹窗 -->
  <!-- <div id="search_modal"></div> -->
  <!-- js -->
  <!--[if lt IE 10]><script src="/static/lib/placeholders.js?20170426"></script><![endif]-->
  
  <script>
    document.write('<script src="api.js?1541521323618"><\/script>');
  </script>

<script src="../lib/backtop.js"></script></body></html>