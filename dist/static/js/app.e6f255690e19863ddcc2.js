webpackJsonp([3],{NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),r=t("Xxa5"),c=t.n(r),s=t("exGp"),o=t.n(s),u=t("Dd8w"),i=t.n(u),d=t("NYxO"),l={name:"App",data:function(){return{}},computed:i()({},Object(d.c)(["menus","selectUrl","selectStr"])),methods:i()({},Object(d.b)(["getMenus"]),Object(d.d)(["changeSelectUrl"]),{handleCommand:function(e){this.changeSelectUrl(e)}}),created:function(){var e=this;return o()(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.getMenus();case 1:case"end":return n.stop()}},n,e)}))()}},m={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"header"},[t("router-link",{attrs:{to:"manage"}},[e._v("管理")]),e._v(" "),t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[e._v("\n        "+e._s(e.selectStr)),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.menus,function(n){return t("el-dropdown-item",{key:n.key,attrs:{command:n.key}},[e._v(e._s(n.name))])}))],1)],1),e._v(" "),t("router-view")],1)},staticRenderFns:[]};var p=t("VU/8")(l,m,!1,function(e){t("NTsU")},null,null).exports,f=t("/ocq");a.default.use(f.a);var g=new f.a({routes:[{path:"/",name:"home",component:function(){return t.e(0).then(t.bind(null,"26dS"))}},{path:"/manage",name:"manage",component:function(){return t.e(1).then(t.bind(null,"bEBz"))}}]}),v=t("zL8q"),h=t.n(v),w=(t("tvR6"),t("Gu7T")),b=t.n(w),k=t("mtWM"),M=t.n(k),U=t("M4fF"),_=t.n(U);a.default.use(d.a);var x=new d.a.Store({state:{menus:[],selectUrl:"",tableLoading:!1},mutations:{changeLoading:function(e,n){e.tableLoading=n},changeMenus:function(e,n){e.menus=n.map(function(e){return{key:"/"+e.dir+"/"+e.entry,name:e.name,dir:e.dir}}),e.selectUrl||(e.selectUrl=e.menus[0].key)},addMenus:function(e,n){e.menus=[].concat(b()(e.menus),[{key:"/api/"+n.dir+"/"+n.entry,name:n.name,dir:n.dir}])},deleteMenu:function(e,n){_.a.remove(e.menus,function(e){return e.dir==n}),e.menus=[].concat(b()(e.menus))},changeSelectUrl:function(e,n){n!==this.url&&(e.selectUrl=n)}},actions:{getMenus:function(e){var n=this,t=e.commit;return o()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("/api/menus");case 2:(a=e.sent)&&a.data&&t("changeMenus",a.data);case 4:case"end":return e.stop()}},e,n)}))()},deleteDoc:function(e,n){var t=this,a=e.commit;return o()(c.a.mark(function e(){var r,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a("changeLoading",!0),e.next=3,M.a.get("/api/delete?dir="+n);case 3:r=e.sent,(s=r&&r.data&&r.data.code)&&a("deleteMenu",n),Object(v.Message)({message:s?"删除成功":"删除失败",type:s?"success":"error"}),a("changeLoading",!1);case 8:case"end":return e.stop()}},e,t)}))()},buildDoc:function(e,n){var t=this,a=e.commit,r=e.dispatch;return o()(c.a.mark(function e(){var s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Object(v.Notification)({title:"文档生成中",message:"时间可能会较长，请耐心等待!"}),s=void 0,e.prev=2,e.next=5,M.a.post("/api/build",n);case 5:s=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:s&&s.data&&s.data.code?(Object(v.Notification)({title:"成功",message:"这是一条成功的提示消息",type:"success"}),a("addMenus",s.data),r("getMenus")):v.Message.error("请求失败");case 13:case"end":return e.stop()}},e,t,[[2,8]])}))()}},getters:{menus:function(e){return e.menus},selectUrl:function(e){return e.selectUrl},selectStr:function(e){if(e.selectUrl){var n=e.menus.find(function(n){return n.key==e.selectUrl});return n?n.name:"选择文档"}return"选择文档"},tableLoading:function(e){return e.tableLoading}}});a.default.config.productionTip=!1,a.default.use(h.a),new a.default({el:"#app",router:g,store:x,components:{App:p},template:"<App/>"})},NTsU:function(e,n){},tvR6:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.e6f255690e19863ddcc2.js.map